
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Modules &#8212; WebAssembly 2.0 (Draft 2022-10-25)</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"tex": {"maxBuffer": 30720}}</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Text Format" href="../text/index.html" />
    <link rel="prev" title="Instructions" href="instructions.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/webassembly.png" alt="Logo"/>
            </a></p><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syntax/index.html">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../valid/index.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exec/index.html">Execution</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Binary Format</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="conventions.html">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="values.html">Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="instructions.html">Instructions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../text/index.html">Text Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index.html">Appendix</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index-types.html">Index of Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index-instructions.html">Index of Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index-rules.html">Index of Semantic Rules</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="../genindex.html">Index</a></li>
    
    <li class="toctree-l1"><a href="../_download/WebAssembly.pdf">Download as PDF</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<p>The binary encoding of modules is organized into <em>sections</em>.
Most sections correspond to one component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a> record,
except that <a class="reference internal" href="../syntax/modules.html#syntax-func"><span class="std std-ref">function definitions</span></a> are split into two sections, separating their type declarations in the <a class="reference internal" href="#binary-funcsec"><span class="std std-ref">function section</span></a> from their bodies in the <a class="reference internal" href="#binary-codesec"><span class="std std-ref">code section</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This separation enables <em>parallel</em> and <em>streaming</em> compilation of the functions in a module.</p>
</div>
<section id="indices">
<span id="binary-index"></span><span id="binary-labelidx"></span><span id="binary-localidx"></span><span id="binary-dataidx"></span><span id="binary-elemidx"></span><span id="binary-globalidx"></span><span id="binary-memidx"></span><span id="binary-tableidx"></span><span id="binary-funcidx"></span><span id="binary-typeidx"></span><span id="index-0"></span><h2>Indices<a class="headerlink" href="#indices" title="Permalink to this headline">¶</a></h2>
<p>All <a class="reference internal" href="../syntax/modules.html#syntax-index"><span class="std std-ref">indices</span></a> are encoded with their respective value.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{type index} &amp; \href{../binary/modules.html#binary-typeidx}{\mathtt{typeidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef1857#1{{}}\mathdef1857{function index} &amp; \href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef1857#1{{}}\mathdef1857{table index} &amp; \href{../binary/modules.html#binary-tableidx}{\mathtt{tableidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef1857#1{{}}\mathdef1857{memory index} &amp; \href{../binary/modules.html#binary-memidx}{\mathtt{memidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef1857#1{{}}\mathdef1857{global index} &amp; \href{../binary/modules.html#binary-globalidx}{\mathtt{globalidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef1857#1{{}}\mathdef1857{element index} &amp; \href{../binary/modules.html#binary-elemidx}{\mathtt{elemidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef1857#1{{}}\mathdef1857{data index} &amp; \href{../binary/modules.html#binary-dataidx}{\mathtt{dataidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef1857#1{{}}\mathdef1857{local index} &amp; \href{../binary/modules.html#binary-localidx}{\mathtt{localidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef1857#1{{}}\mathdef1857{label index} &amp; \href{../binary/modules.html#binary-labelidx}{\mathtt{labelidx}} &amp;::=&amp; l{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}} &amp;\Rightarrow&amp; l \\
\end{array}\end{split}\]</div>
</section>
<section id="sections">
<span id="binary-section"></span><span id="index-1"></span><h2>Sections<a class="headerlink" href="#sections" title="Permalink to this headline">¶</a></h2>
<p>Each section consists of</p>
<ul class="simple">
<li><p>a one-byte section <em>id</em>,</p></li>
<li><p>the <span class="math notranslate nohighlight">\(\href{../syntax/values.html#syntax-int}{\mathit{u32}}\)</span> <em>size</em> of the contents, in bytes,</p></li>
<li><p>the actual <em>contents</em>, whose structure is depended on the section id.</p></li>
</ul>
<p>Every section is optional; an omitted section is equivalent to the section being present with empty contents.</p>
<p>The following parameterized grammar rule defines the generic structure of a section with id <span class="math notranslate nohighlight">\(N\)</span> and contents described by the grammar <span class="math notranslate nohighlight">\(\mathtt{B}\)</span>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll&#64;{\qquad}l}
\def\mathdef1857#1{{}}\mathdef1857{section} &amp; \href{../binary/modules.html#binary-section}{\mathtt{section}}_N(\mathtt{B}) &amp;::=&amp;
  N{:}\href{../binary/values.html#binary-byte}{\mathtt{byte}}~~\mathit{size}{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~\mathit{cont}{:}\mathtt{B}
    &amp;\Rightarrow&amp; \mathit{cont} &amp; (\mathrel{\mbox{if}} \mathit{size} = ||\mathtt{B}||) \\ &amp;&amp;|&amp;
  \epsilon &amp;\Rightarrow&amp; \epsilon
\end{array}\end{split}\]</div>
<p>For most sections, the contents <span class="math notranslate nohighlight">\(\mathtt{B}\)</span> encodes a <a class="reference internal" href="conventions.html#binary-vec"><span class="std std-ref">vector</span></a>.
In these cases, the empty result <span class="math notranslate nohighlight">\(\epsilon\)</span> is interpreted as the empty vector.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Other than for unknown <a class="reference internal" href="#binary-customsec"><span class="std std-ref">custom sections</span></a>,
the <span class="math notranslate nohighlight">\(\mathit{size}\)</span> is not required for decoding, but can be used to skip sections when navigating through a binary.
The module is malformed if the size does not match the length of the binary contents <span class="math notranslate nohighlight">\(\mathtt{B}\)</span>.</p>
</div>
<p>The following section ids are used:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 4%" />
<col style="width: 96%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Id</p></th>
<th class="head"><p>Section</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p><a class="reference internal" href="#binary-customsec"><span class="std std-ref">custom section</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p><a class="reference internal" href="#binary-typesec"><span class="std std-ref">type section</span></a></p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p><a class="reference internal" href="#binary-importsec"><span class="std std-ref">import section</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p><a class="reference internal" href="#binary-funcsec"><span class="std std-ref">function section</span></a></p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p><a class="reference internal" href="#binary-tablesec"><span class="std std-ref">table section</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p><a class="reference internal" href="#binary-memsec"><span class="std std-ref">memory section</span></a></p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p><a class="reference internal" href="#binary-globalsec"><span class="std std-ref">global section</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p><a class="reference internal" href="#binary-exportsec"><span class="std std-ref">export section</span></a></p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p><a class="reference internal" href="#binary-startsec"><span class="std std-ref">start section</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p><a class="reference internal" href="#binary-elemsec"><span class="std std-ref">element section</span></a></p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p><a class="reference internal" href="#binary-codesec"><span class="std std-ref">code section</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p><a class="reference internal" href="#binary-datasec"><span class="std std-ref">data section</span></a></p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p><a class="reference internal" href="#binary-datacountsec"><span class="std std-ref">data count section</span></a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="custom-section">
<span id="binary-customsec"></span><span id="index-2"></span><h2>Custom Section<a class="headerlink" href="#custom-section" title="Permalink to this headline">¶</a></h2>
<p><em>Custom sections</em> have the id 0.
They are intended to be used for debugging information or third-party extensions, and are ignored by the WebAssembly semantics.
Their contents consist of a <a class="reference internal" href="../syntax/values.html#syntax-name"><span class="std std-ref">name</span></a> further identifying the custom section, followed by an uninterpreted sequence of bytes for custom use.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{custom section} &amp; \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}} &amp;::=&amp;
  \href{../binary/modules.html#binary-section}{\mathtt{section}}_0(\href{../binary/modules.html#binary-customsec}{\mathtt{custom}}) \\
\def\mathdef1857#1{{}}\mathdef1857{custom data} &amp; \href{../binary/modules.html#binary-customsec}{\mathtt{custom}} &amp;::=&amp;
  \href{../binary/values.html#binary-name}{\mathtt{name}}~~\href{../binary/values.html#binary-byte}{\mathtt{byte}}^\ast \\
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an implementation interprets the data of a custom section, then errors in that data, or the placement of the section, must not invalidate the module.</p>
</div>
</section>
<section id="type-section">
<span id="binary-typesec"></span><span id="binary-typedef"></span><span id="index-3"></span><h2>Type Section<a class="headerlink" href="#type-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>type section</em> has the id 1.
It decodes into a vector of <a class="reference internal" href="../syntax/types.html#syntax-functype"><span class="std std-ref">function types</span></a> that represent the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{types}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{type section} &amp; \href{../binary/modules.html#binary-typesec}{\mathtt{typesec}} &amp;::=&amp;
  \mathit{ft}^\ast{:\,}\href{../binary/modules.html#binary-section}{\mathtt{section}}_1(\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/types.html#binary-functype}{\mathtt{functype}})) &amp;\Rightarrow&amp; \mathit{ft}^\ast \\
\end{array}\end{split}\]</div>
</section>
<section id="import-section">
<span id="binary-importsec"></span><span id="binary-importdesc"></span><span id="binary-import"></span><span id="index-4"></span><h2>Import Section<a class="headerlink" href="#import-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>import section</em> has the id 2.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-import"><span class="std std-ref">imports</span></a> that represent the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{imports}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{import section} &amp; \href{../binary/modules.html#binary-importsec}{\mathtt{importsec}} &amp;::=&amp;
  \mathit{im}^\ast{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_2(\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-import}{\mathtt{import}})) &amp;\Rightarrow&amp; \mathit{im}^\ast \\
\def\mathdef1857#1{{}}\mathdef1857{import} &amp; \href{../binary/modules.html#binary-import}{\mathtt{import}} &amp;::=&amp;
  \mathit{mod}{:}\href{../binary/values.html#binary-name}{\mathtt{name}}~~\mathit{nm}{:}\href{../binary/values.html#binary-name}{\mathtt{name}}~~d{:}\href{../binary/modules.html#binary-importdesc}{\mathtt{importdesc}}
    &amp;\Rightarrow&amp; \{ \href{../syntax/modules.html#syntax-import}{\mathsf{module}}~\mathit{mod}, \href{../syntax/modules.html#syntax-import}{\mathsf{name}}~\mathit{nm}, \href{../syntax/modules.html#syntax-import}{\mathsf{desc}}~d \} \\
\def\mathdef1857#1{{}}\mathdef1857{import description} &amp; \href{../binary/modules.html#binary-importdesc}{\mathtt{importdesc}} &amp;::=&amp;
  \def\mathdef1896#1{\mathtt{0x#1}}\mathdef1896{00}~~x{:}\href{../binary/modules.html#binary-typeidx}{\mathtt{typeidx}} &amp;\Rightarrow&amp; \href{../syntax/modules.html#syntax-importdesc}{\mathsf{func}}~x \\ &amp;&amp;|&amp;
  \def\mathdef1897#1{\mathtt{0x#1}}\mathdef1897{01}~~\mathit{tt}{:}\href{../binary/types.html#binary-tabletype}{\mathtt{tabletype}} &amp;\Rightarrow&amp; \href{../syntax/modules.html#syntax-importdesc}{\mathsf{table}}~\mathit{tt} \\ &amp;&amp;|&amp;
  \def\mathdef1898#1{\mathtt{0x#1}}\mathdef1898{02}~~\mathit{mt}{:}\href{../binary/types.html#binary-memtype}{\mathtt{memtype}} &amp;\Rightarrow&amp; \href{../syntax/modules.html#syntax-importdesc}{\mathsf{mem}}~\mathit{mt} \\ &amp;&amp;|&amp;
  \def\mathdef1899#1{\mathtt{0x#1}}\mathdef1899{03}~~\mathit{gt}{:}\href{../binary/types.html#binary-globaltype}{\mathtt{globaltype}} &amp;\Rightarrow&amp; \href{../syntax/modules.html#syntax-importdesc}{\mathsf{global}}~\mathit{gt} \\
\end{array}\end{split}\]</div>
</section>
<section id="function-section">
<span id="binary-funcsec"></span><span id="index-5"></span><h2>Function Section<a class="headerlink" href="#function-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>function section</em> has the id 3.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-typeidx"><span class="std std-ref">type indices</span></a> that represent the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-func}{\mathsf{type}}\)</span> fields of the <a class="reference internal" href="../syntax/modules.html#syntax-func"><span class="std std-ref">functions</span></a> in the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{funcs}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.
The <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-func}{\mathsf{locals}}\)</span> and <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-func}{\mathsf{body}}\)</span> fields of the respective functions are encoded separately in the <a class="reference internal" href="#binary-codesec"><span class="std std-ref">code section</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{function section} &amp; \href{../binary/modules.html#binary-funcsec}{\mathtt{funcsec}} &amp;::=&amp;
  x^\ast{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_3(\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-typeidx}{\mathtt{typeidx}})) &amp;\Rightarrow&amp; x^\ast \\
\end{array}\end{split}\]</div>
</section>
<section id="table-section">
<span id="binary-tablesec"></span><span id="binary-table"></span><span id="index-6"></span><h2>Table Section<a class="headerlink" href="#table-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>table section</em> has the id 4.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-table"><span class="std std-ref">tables</span></a> that represent the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{tables}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{table section} &amp; \href{../binary/modules.html#binary-tablesec}{\mathtt{tablesec}} &amp;::=&amp;
  \mathit{tab}^\ast{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_4(\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-table}{\mathtt{table}})) &amp;\Rightarrow&amp; \mathit{tab}^\ast \\
\def\mathdef1857#1{{}}\mathdef1857{table} &amp; \href{../binary/modules.html#binary-table}{\mathtt{table}} &amp;::=&amp;
  \mathit{tt}{:}\href{../binary/types.html#binary-tabletype}{\mathtt{tabletype}} &amp;\Rightarrow&amp; \{ \href{../syntax/modules.html#syntax-table}{\mathsf{type}}~\mathit{tt} \} \\
\end{array}\end{split}\]</div>
</section>
<section id="memory-section">
<span id="binary-memsec"></span><span id="binary-mem"></span><span id="index-7"></span><h2>Memory Section<a class="headerlink" href="#memory-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>memory section</em> has the id 5.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-mem"><span class="std std-ref">memories</span></a> that represent the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{mems}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{memory section} &amp; \href{../binary/modules.html#binary-memsec}{\mathtt{memsec}} &amp;::=&amp;
  \mathit{mem}^\ast{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_5(\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-mem}{\mathtt{mem}})) &amp;\Rightarrow&amp; \mathit{mem}^\ast \\
\def\mathdef1857#1{{}}\mathdef1857{memory} &amp; \href{../binary/modules.html#binary-mem}{\mathtt{mem}} &amp;::=&amp;
  \mathit{mt}{:}\href{../binary/types.html#binary-memtype}{\mathtt{memtype}} &amp;\Rightarrow&amp; \{ \href{../syntax/modules.html#syntax-mem}{\mathsf{type}}~\mathit{mt} \} \\
\end{array}\end{split}\]</div>
</section>
<section id="global-section">
<span id="binary-globalsec"></span><span id="binary-global"></span><span id="index-8"></span><h2>Global Section<a class="headerlink" href="#global-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>global section</em> has the id 6.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-global"><span class="std std-ref">globals</span></a> that represent the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{globals}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{global section} &amp; \href{../binary/modules.html#binary-globalsec}{\mathtt{globalsec}} &amp;::=&amp;
  \mathit{glob}^\ast{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_6(\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-global}{\mathtt{global}})) &amp;\Rightarrow&amp; \mathit{glob}^\ast \\
\def\mathdef1857#1{{}}\mathdef1857{global} &amp; \href{../binary/modules.html#binary-global}{\mathtt{global}} &amp;::=&amp;
  \mathit{gt}{:}\href{../binary/types.html#binary-globaltype}{\mathtt{globaltype}}~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}
    &amp;\Rightarrow&amp; \{ \href{../syntax/modules.html#syntax-global}{\mathsf{type}}~\mathit{gt}, \href{../syntax/modules.html#syntax-global}{\mathsf{init}}~e \} \\
\end{array}\end{split}\]</div>
</section>
<section id="export-section">
<span id="binary-exportsec"></span><span id="binary-exportdesc"></span><span id="binary-export"></span><span id="index-9"></span><h2>Export Section<a class="headerlink" href="#export-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>export section</em> has the id 7.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-export"><span class="std std-ref">exports</span></a> that represent the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{exports}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{export section} &amp; \href{../binary/modules.html#binary-exportsec}{\mathtt{exportsec}} &amp;::=&amp;
  \mathit{ex}^\ast{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_7(\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-export}{\mathtt{export}})) &amp;\Rightarrow&amp; \mathit{ex}^\ast \\
\def\mathdef1857#1{{}}\mathdef1857{export} &amp; \href{../binary/modules.html#binary-export}{\mathtt{export}} &amp;::=&amp;
  \mathit{nm}{:}\href{../binary/values.html#binary-name}{\mathtt{name}}~~d{:}\href{../binary/modules.html#binary-exportdesc}{\mathtt{exportdesc}}
    &amp;\Rightarrow&amp; \{ \href{../syntax/modules.html#syntax-export}{\mathsf{name}}~\mathit{nm}, \href{../syntax/modules.html#syntax-export}{\mathsf{desc}}~d \} \\
\def\mathdef1857#1{{}}\mathdef1857{export description} &amp; \href{../binary/modules.html#binary-exportdesc}{\mathtt{exportdesc}} &amp;::=&amp;
  \def\mathdef1900#1{\mathtt{0x#1}}\mathdef1900{00}~~x{:}\href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}} &amp;\Rightarrow&amp; \href{../syntax/modules.html#syntax-exportdesc}{\mathsf{func}}~x \\ &amp;&amp;|&amp;
  \def\mathdef1901#1{\mathtt{0x#1}}\mathdef1901{01}~~x{:}\href{../binary/modules.html#binary-tableidx}{\mathtt{tableidx}} &amp;\Rightarrow&amp; \href{../syntax/modules.html#syntax-exportdesc}{\mathsf{table}}~x \\ &amp;&amp;|&amp;
  \def\mathdef1902#1{\mathtt{0x#1}}\mathdef1902{02}~~x{:}\href{../binary/modules.html#binary-memidx}{\mathtt{memidx}} &amp;\Rightarrow&amp; \href{../syntax/modules.html#syntax-exportdesc}{\mathsf{mem}}~x \\ &amp;&amp;|&amp;
  \def\mathdef1903#1{\mathtt{0x#1}}\mathdef1903{03}~~x{:}\href{../binary/modules.html#binary-globalidx}{\mathtt{globalidx}} &amp;\Rightarrow&amp; \href{../syntax/modules.html#syntax-exportdesc}{\mathsf{global}}~x \\
\end{array}\end{split}\]</div>
</section>
<section id="start-section">
<span id="binary-startsec"></span><span id="binary-start"></span><span id="index-10"></span><h2>Start Section<a class="headerlink" href="#start-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>start section</em> has the id 8.
It decodes into an optional <a class="reference internal" href="../syntax/modules.html#syntax-start"><span class="std std-ref">start function</span></a> that represents the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{start}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{start section} &amp; \href{../binary/modules.html#binary-startsec}{\mathtt{startsec}} &amp;::=&amp;
  \mathit{st}^?{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_8(\href{../binary/modules.html#binary-start}{\mathtt{start}}) &amp;\Rightarrow&amp; \mathit{st}^? \\
\def\mathdef1857#1{{}}\mathdef1857{start function} &amp; \href{../binary/modules.html#binary-start}{\mathtt{start}} &amp;::=&amp;
  x{:}\href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}} &amp;\Rightarrow&amp; \{ \href{../syntax/modules.html#syntax-start}{\mathsf{func}}~x \} \\
\end{array}\end{split}\]</div>
</section>
<section id="element-section">
<span id="binary-elemkind"></span><span id="binary-elemsec"></span><span id="binary-elem"></span><span id="index-11"></span><h2>Element Section<a class="headerlink" href="#element-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>element section</em> has the id 9.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-elem"><span class="std std-ref">element segments</span></a> that represent the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{elems}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{element section} &amp; \href{../binary/modules.html#binary-elemsec}{\mathtt{elemsec}} &amp;::=&amp;
  \mathit{seg}^\ast{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_9(\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-elem}{\mathtt{elem}})) &amp;\Rightarrow&amp; \mathit{seg}^\ast \\
\def\mathdef1857#1{{}}\mathdef1857{element segment} &amp; \href{../binary/modules.html#binary-elem}{\mathtt{elem}} &amp;::=&amp;
  0{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}~~y^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}})
    &amp;\Rightarrow&amp; \\&amp;&amp;&amp;\quad
    \{ \href{../syntax/modules.html#syntax-elem}{\mathsf{type}}~\href{../syntax/types.html#syntax-reftype}{\mathsf{funcref}}, \href{../syntax/modules.html#syntax-elem}{\mathsf{init}}~((\href{../syntax/instructions.html#syntax-instr-ref}{\mathsf{ref{.}func}}~y)~\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{end}})^\ast, \href{../syntax/modules.html#syntax-elem}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-elemmode}{\mathsf{active}}~\{ \href{../syntax/modules.html#syntax-elem}{\mathsf{table}}~0, \href{../syntax/modules.html#syntax-elem}{\mathsf{offset}}~e \} \} \\ &amp;&amp;|&amp;
  1{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~\mathit{et}:\href{../binary/modules.html#binary-elemkind}{\mathtt{elemkind}}~~y^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}})
    &amp;\Rightarrow&amp; \\&amp;&amp;&amp;\quad
    \{ \href{../syntax/modules.html#syntax-elem}{\mathsf{type}}~\mathit{et}, \href{../syntax/modules.html#syntax-elem}{\mathsf{init}}~((\href{../syntax/instructions.html#syntax-instr-ref}{\mathsf{ref{.}func}}~y)~\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{end}})^\ast, \href{../syntax/modules.html#syntax-elem}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-elemmode}{\mathsf{passive}} \} \\ &amp;&amp;|&amp;
  2{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~x{:}\href{../binary/modules.html#binary-tableidx}{\mathtt{tableidx}}~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}~~\mathit{et}:\href{../binary/modules.html#binary-elemkind}{\mathtt{elemkind}}~~y^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}})
    &amp;\Rightarrow&amp; \\&amp;&amp;&amp;\quad
    \{ \href{../syntax/modules.html#syntax-elem}{\mathsf{type}}~\mathit{et}, \href{../syntax/modules.html#syntax-elem}{\mathsf{init}}~((\href{../syntax/instructions.html#syntax-instr-ref}{\mathsf{ref{.}func}}~y)~\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{end}})^\ast, \href{../syntax/modules.html#syntax-elem}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-elemmode}{\mathsf{active}}~\{ \href{../syntax/modules.html#syntax-elem}{\mathsf{table}}~x, \href{../syntax/modules.html#syntax-elem}{\mathsf{offset}}~e \} \} \\ &amp;&amp;|&amp;
  3{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~\mathit{et}:\href{../binary/modules.html#binary-elemkind}{\mathtt{elemkind}}~~y^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}})
    &amp;\Rightarrow&amp; \\&amp;&amp;&amp;\quad
    \{ \href{../syntax/modules.html#syntax-elem}{\mathsf{type}}~\mathit{et}, \href{../syntax/modules.html#syntax-elem}{\mathsf{init}}~((\href{../syntax/instructions.html#syntax-instr-ref}{\mathsf{ref{.}func}}~y)~\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{end}})^\ast, \href{../syntax/modules.html#syntax-elem}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-elemmode}{\mathsf{declarative}} \} \\ &amp;&amp;|&amp;
  4{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}~~\mathit{el}^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/instructions.html#binary-expr}{\mathtt{expr}})
    &amp;\Rightarrow&amp; \\&amp;&amp;&amp;\quad
    \{ \href{../syntax/modules.html#syntax-elem}{\mathsf{type}}~\href{../syntax/types.html#syntax-reftype}{\mathsf{funcref}}, \href{../syntax/modules.html#syntax-elem}{\mathsf{init}}~\mathit{el}^\ast, \href{../syntax/modules.html#syntax-elem}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-elemmode}{\mathsf{active}}~\{ \href{../syntax/modules.html#syntax-elem}{\mathsf{table}}~0, \href{../syntax/modules.html#syntax-elem}{\mathsf{offset}}~e \} \} \\ &amp;&amp;|&amp;
  5{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~\mathit{et}:\href{../binary/types.html#binary-reftype}{\mathtt{reftype}}~~\mathit{el}^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/instructions.html#binary-expr}{\mathtt{expr}})
    &amp;\Rightarrow&amp; \\&amp;&amp;&amp;\quad
    \{ \href{../syntax/modules.html#syntax-elem}{\mathsf{type}}~et, \href{../syntax/modules.html#syntax-elem}{\mathsf{init}}~\mathit{el}^\ast, \href{../syntax/modules.html#syntax-elem}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-elemmode}{\mathsf{passive}} \} \\ &amp;&amp;|&amp;
  6{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~x{:}\href{../binary/modules.html#binary-tableidx}{\mathtt{tableidx}}~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}~~\mathit{et}:\href{../binary/types.html#binary-reftype}{\mathtt{reftype}}~~\mathit{el}^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/instructions.html#binary-expr}{\mathtt{expr}})
    &amp;\Rightarrow&amp; \\&amp;&amp;&amp;\quad
    \{ \href{../syntax/modules.html#syntax-elem}{\mathsf{type}}~et, \href{../syntax/modules.html#syntax-elem}{\mathsf{init}}~\mathit{el}^\ast, \href{../syntax/modules.html#syntax-elem}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-elemmode}{\mathsf{active}}~\{ \href{../syntax/modules.html#syntax-elem}{\mathsf{table}}~x, \href{../syntax/modules.html#syntax-elem}{\mathsf{offset}}~e \} \} \\ &amp;&amp;|&amp;
  7{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~\mathit{et}:\href{../binary/types.html#binary-reftype}{\mathtt{reftype}}~~\mathit{el}^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/instructions.html#binary-expr}{\mathtt{expr}})
    &amp;\Rightarrow&amp; \\&amp;&amp;&amp;\quad
    \{ \href{../syntax/modules.html#syntax-elem}{\mathsf{type}}~et, \href{../syntax/modules.html#syntax-elem}{\mathsf{init}}~\mathit{el}^\ast, \href{../syntax/modules.html#syntax-elem}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-elemmode}{\mathsf{declarative}} \} \\
\def\mathdef1857#1{{}}\mathdef1857{element kind} &amp; \href{../binary/modules.html#binary-elemkind}{\mathtt{elemkind}} &amp;::=&amp;
  \def\mathdef1904#1{\mathtt{0x#1}}\mathdef1904{00} &amp;\Rightarrow&amp; \href{../syntax/types.html#syntax-reftype}{\mathsf{funcref}} \\
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The initial integer can be interpreted as a bitfield.
Bit 0 indicates a passive or declarative segment,
bit 1 indicates the presence of an explicit table index for an active segment and otherwise distinguishes passive from declarative segments,
bit 2 indicates the use of element type and element <a class="reference internal" href="instructions.html#binary-expr"><span class="std std-ref">expressions</span></a> instead of element kind and element indices.</p>
<p>Additional element kinds may be added in future versions of WebAssembly.</p>
</div>
</section>
<section id="code-section">
<span id="binary-codesec"></span><span id="binary-local"></span><span id="binary-func"></span><span id="binary-code"></span><span id="index-12"></span><h2>Code Section<a class="headerlink" href="#code-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>code section</em> has the id 10.
It decodes into a vector of <em>code</em> entries that are pairs of <a class="reference internal" href="../syntax/types.html#syntax-valtype"><span class="std std-ref">value type</span></a> vectors and <a class="reference internal" href="../syntax/instructions.html#syntax-expr"><span class="std std-ref">expressions</span></a>.
They represent the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-func}{\mathsf{locals}}\)</span> and <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-func}{\mathsf{body}}\)</span> field of the <a class="reference internal" href="../syntax/modules.html#syntax-func"><span class="std std-ref">functions</span></a> in the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{funcs}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.
The <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-func}{\mathsf{type}}\)</span> fields of the respective functions are encoded separately in the <a class="reference internal" href="#binary-funcsec"><span class="std std-ref">function section</span></a>.</p>
<p>The encoding of each code entry consists of</p>
<ul class="simple">
<li><p>the <span class="math notranslate nohighlight">\(\href{../syntax/values.html#syntax-int}{\mathit{u32}}\)</span> <em>size</em> of the function code in bytes,</p></li>
<li><p>the actual <em>function code</em>, which in turn consists of</p>
<ul>
<li><p>the declaration of <em>locals</em>,</p></li>
<li><p>the function <em>body</em> as an <a class="reference internal" href="instructions.html#binary-expr"><span class="std std-ref">expression</span></a>.</p></li>
</ul>
</li>
</ul>
<p>Local declarations are compressed into a vector whose entries consist of</p>
<ul class="simple">
<li><p>a <span class="math notranslate nohighlight">\(\href{../syntax/values.html#syntax-int}{\mathit{u32}}\)</span> <em>count</em>,</p></li>
<li><p>a <a class="reference internal" href="types.html#binary-valtype"><span class="std std-ref">value type</span></a>,</p></li>
</ul>
<p>denoting <em>count</em> locals of the same value type.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll&#64;{\qquad}l}
\def\mathdef1857#1{{}}\mathdef1857{code section} &amp; \href{../binary/modules.html#binary-codesec}{\mathtt{codesec}} &amp;::=&amp;
  \mathit{code}^\ast{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_{10}(\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-code}{\mathtt{code}}))
    &amp;\Rightarrow&amp; \mathit{code}^\ast \\
\def\mathdef1857#1{{}}\mathdef1857{code} &amp; \href{../binary/modules.html#binary-code}{\mathtt{code}} &amp;::=&amp;
  \mathit{size}{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~\mathit{code}{:}\href{../binary/modules.html#binary-func}{\mathtt{func}}
    &amp;\Rightarrow&amp; \mathit{code} &amp; (\mathrel{\mbox{if}} \mathit{size} = ||\href{../binary/modules.html#binary-func}{\mathtt{func}}||) \\
\def\mathdef1857#1{{}}\mathdef1857{function} &amp; \href{../binary/modules.html#binary-func}{\mathtt{func}} &amp;::=&amp;
  (t^\ast)^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-local}{\mathtt{locals}})~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}
    &amp;\Rightarrow&amp; \href{../syntax/conventions.html#notation-concat}{\mathrm{concat}}((t^\ast)^\ast), e
      &amp; (\mathrel{\mbox{if}} |\href{../syntax/conventions.html#notation-concat}{\mathrm{concat}}((t^\ast)^\ast)| &lt; 2^{32}) \\
\def\mathdef1857#1{{}}\mathdef1857{locals} &amp; \href{../binary/modules.html#binary-local}{\mathtt{locals}} &amp;::=&amp;
  n{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~t{:}\href{../binary/types.html#binary-valtype}{\mathtt{valtype}} &amp;\Rightarrow&amp; t^n \\
\end{array}\end{split}\]</div>
<p>Here, <span class="math notranslate nohighlight">\(\mathit{code}\)</span> ranges over pairs <span class="math notranslate nohighlight">\((\href{../syntax/types.html#syntax-valtype}{\mathit{valtype}}^\ast, \href{../syntax/instructions.html#syntax-expr}{\mathit{expr}})\)</span>.
The meta function <span class="math notranslate nohighlight">\(\href{../syntax/conventions.html#notation-concat}{\mathrm{concat}}((t^\ast)^\ast)\)</span> concatenates all sequences <span class="math notranslate nohighlight">\(t_i^\ast\)</span> in <span class="math notranslate nohighlight">\((t^\ast)^\ast\)</span>.
Any code for which the length of the resulting sequence is out of bounds of the maximum size of a <a class="reference internal" href="../syntax/conventions.html#syntax-vec"><span class="std std-ref">vector</span></a> is malformed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Like with <a class="reference internal" href="#binary-section"><span class="std std-ref">sections</span></a>, the code <span class="math notranslate nohighlight">\(\mathit{size}\)</span> is not needed for decoding, but can be used to skip functions when navigating through a binary.
The module is malformed if a size does not match the length of the respective function code.</p>
</div>
</section>
<section id="data-section">
<span id="binary-datasec"></span><span id="binary-data"></span><span id="index-13"></span><h2>Data Section<a class="headerlink" href="#data-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>data section</em> has the id 11.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-data"><span class="std std-ref">data segments</span></a> that represent the <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-module}{\mathsf{datas}}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{data section} &amp; \href{../binary/modules.html#binary-datasec}{\mathtt{datasec}} &amp;::=&amp;
  \mathit{seg}^\ast{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_{11}(\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-data}{\mathtt{data}})) &amp;\Rightarrow&amp; \mathit{seg}^\ast \\
\def\mathdef1857#1{{}}\mathdef1857{data segment} &amp; \href{../binary/modules.html#binary-data}{\mathtt{data}} &amp;::=&amp;
  0{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}~~b^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/values.html#binary-byte}{\mathtt{byte}})
    &amp;\Rightarrow&amp; \{ \href{../syntax/modules.html#syntax-data}{\mathsf{init}}~b^\ast, \href{../syntax/modules.html#syntax-data}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-datamode}{\mathsf{active}}~\{ \href{../syntax/modules.html#syntax-data}{\mathsf{memory}}~0, \href{../syntax/modules.html#syntax-data}{\mathsf{offset}}~e \} \} \\ &amp;&amp;|&amp;
  1{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~b^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/values.html#binary-byte}{\mathtt{byte}})
    &amp;\Rightarrow&amp; \{ \href{../syntax/modules.html#syntax-data}{\mathsf{init}}~b^\ast, \href{../syntax/modules.html#syntax-data}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-datamode}{\mathsf{passive}} \} \\ &amp;&amp;|&amp;
  2{:}\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}~~x{:}\href{../binary/modules.html#binary-memidx}{\mathtt{memidx}}~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}~~b^\ast{:}\href{../binary/conventions.html#binary-vec}{\mathtt{vec}}(\href{../binary/values.html#binary-byte}{\mathtt{byte}})
    &amp;\Rightarrow&amp; \{ \href{../syntax/modules.html#syntax-data}{\mathsf{init}}~b^\ast, \href{../syntax/modules.html#syntax-data}{\mathsf{mode}}~\href{../syntax/modules.html#syntax-datamode}{\mathsf{active}}~\{ \href{../syntax/modules.html#syntax-data}{\mathsf{memory}}~x, \href{../syntax/modules.html#syntax-data}{\mathsf{offset}}~e \} \} \\
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The initial integer can be interpreted as a bitfield.
Bit 0 indicates a passive segment,
bit 1 indicates the presence of an explicit memory index for an active segment.</p>
<p>In the current version of WebAssembly, at most one memory may be defined or
imported in a single module, so all valid <a class="reference internal" href="../syntax/modules.html#syntax-data"><span class="std std-ref">active</span></a> data
segments have a <span class="math notranslate nohighlight">\(\href{../syntax/modules.html#syntax-data}{\mathsf{memory}}\)</span> value of <span class="math notranslate nohighlight">\(0\)</span>.</p>
</div>
</section>
<section id="data-count-section">
<span id="binary-datacountsec"></span><span id="index-14"></span><h2>Data Count Section<a class="headerlink" href="#data-count-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>data count section</em> has the id 12.
It decodes into an optional <a class="reference internal" href="../syntax/values.html#syntax-uint"><span class="std std-ref">u32</span></a> that represents the number of <a class="reference internal" href="../syntax/modules.html#syntax-data"><span class="std std-ref">data segments</span></a> in the <a class="reference internal" href="#binary-datasec"><span class="std std-ref">data section</span></a>. If this count does not match the length of the data segment vector, the module is malformed.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef1857#1{{}}\mathdef1857{data count section} &amp; \href{../binary/modules.html#binary-datacountsec}{\mathtt{datacountsec}} &amp;::=&amp;
  \mathit{n}^?{:}\href{../binary/modules.html#binary-section}{\mathtt{section}}_{12}(\href{../binary/values.html#binary-int}{\def\mathdef1862#1{{\mathtt{u}#1}}\mathdef1862{\mathtt{32}}}) &amp;\Rightarrow&amp; \mathit{n}^? \\
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The data count section is used to simplify single-pass validation. Since the
data section occurs after the code section, the <span class="math notranslate nohighlight">\(\href{../syntax/instructions.html#syntax-instr-memory}{\mathsf{memory.init}}\)</span> and
<span class="math notranslate nohighlight">\(\href{../syntax/instructions.html#syntax-instr-memory}{\mathsf{data.drop}}\)</span> instructions would not be able to check whether the data
segment index is valid until the data section is read. The data count section
occurs before the code section, so a single-pass validator can use this count
instead of deferring validation.</p>
</div>
</section>
<section id="binary-module">
<span id="binary-version"></span><span id="binary-magic"></span><span id="index-15"></span><span id="id1"></span><h2>Modules<a class="headerlink" href="#binary-module" title="Permalink to this headline">¶</a></h2>
<p>The encoding of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a> starts with a preamble containing a 4-byte magic number (the string <span class="math notranslate nohighlight">\(\def\mathdef1905#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef1905{\backslash0asm}\)</span>) and a version field.
The current version of the WebAssembly binary format is 1.</p>
<p>The preamble is followed by a sequence of <a class="reference internal" href="#binary-section"><span class="std std-ref">sections</span></a>.
<a class="reference internal" href="#binary-customsec"><span class="std std-ref">Custom sections</span></a> may be inserted at any place in this sequence,
while other sections must occur at most once and in the prescribed order.
All sections can be empty.</p>
<p>The lengths of vectors produced by the (possibly empty) <a class="reference internal" href="#binary-funcsec"><span class="std std-ref">function</span></a> and <a class="reference internal" href="#binary-codesec"><span class="std std-ref">code</span></a> section must match up.</p>
<p>Similarly, the optional data count must match the length of the <a class="reference internal" href="#binary-datasec"><span class="std std-ref">data segment</span></a> vector.
Furthermore, it must be present if any <a class="reference internal" href="../syntax/modules.html#syntax-dataidx"><span class="std std-ref">data index</span></a> occurs in the code section.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llcllll}
\def\mathdef1857#1{{}}\mathdef1857{magic} &amp; \href{../binary/modules.html#binary-magic}{\mathtt{magic}} &amp;::=&amp;
  \def\mathdef1906#1{\mathtt{0x#1}}\mathdef1906{00}~\def\mathdef1907#1{\mathtt{0x#1}}\mathdef1907{61}~\def\mathdef1908#1{\mathtt{0x#1}}\mathdef1908{73}~\def\mathdef1909#1{\mathtt{0x#1}}\mathdef1909{6D} \\
\def\mathdef1857#1{{}}\mathdef1857{version} &amp; \href{../binary/modules.html#binary-version}{\mathtt{version}} &amp;::=&amp;
  \def\mathdef1910#1{\mathtt{0x#1}}\mathdef1910{01}~\def\mathdef1911#1{\mathtt{0x#1}}\mathdef1911{00}~\def\mathdef1912#1{\mathtt{0x#1}}\mathdef1912{00}~\def\mathdef1913#1{\mathtt{0x#1}}\mathdef1913{00} \\
\def\mathdef1857#1{{}}\mathdef1857{module} &amp; \href{../binary/modules.html#binary-module}{\mathtt{module}} &amp;::=&amp;
  \href{../binary/modules.html#binary-magic}{\mathtt{magic}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-version}{\mathtt{version}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/types.html#syntax-functype}{\mathit{functype}}^\ast{:\,}\href{../binary/modules.html#binary-typesec}{\mathtt{typesec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-import}{\mathit{import}}^\ast{:\,}\href{../binary/modules.html#binary-importsec}{\mathtt{importsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-typeidx}{\mathit{typeidx}}^n{:\,}\href{../binary/modules.html#binary-funcsec}{\mathtt{funcsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-table}{\mathit{table}}^\ast{:\,}\href{../binary/modules.html#binary-tablesec}{\mathtt{tablesec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-mem}{\mathit{mem}}^\ast{:\,}\href{../binary/modules.html#binary-memsec}{\mathtt{memsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-global}{\mathit{global}}^\ast{:\,}\href{../binary/modules.html#binary-globalsec}{\mathtt{globalsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-export}{\mathit{export}}^\ast{:\,}\href{../binary/modules.html#binary-exportsec}{\mathtt{exportsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-start}{\mathit{start}}^?{:\,}\href{../binary/modules.html#binary-startsec}{\mathtt{startsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-elem}{\mathit{elem}}^\ast{:\,}\href{../binary/modules.html#binary-elemsec}{\mathtt{elemsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  m^?{:\,}\href{../binary/modules.html#binary-datacountsec}{\mathtt{datacountsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \mathit{code}^n{:\,}\href{../binary/modules.html#binary-codesec}{\mathtt{codesec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-data}{\mathit{data}}^m{:\,}\href{../binary/modules.html#binary-datasec}{\mathtt{datasec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast
  \quad\Rightarrow\quad \{~
    \begin{array}[t]{&#64;{}l&#64;{}}
    \href{../syntax/modules.html#syntax-module}{\mathsf{types}}~\href{../syntax/types.html#syntax-functype}{\mathit{functype}}^\ast, \\
    \href{../syntax/modules.html#syntax-module}{\mathsf{funcs}}~\href{../syntax/modules.html#syntax-func}{\mathit{func}}^n, \\
    \href{../syntax/modules.html#syntax-module}{\mathsf{tables}}~\href{../syntax/modules.html#syntax-table}{\mathit{table}}^\ast, \\
    \href{../syntax/modules.html#syntax-module}{\mathsf{mems}}~\href{../syntax/modules.html#syntax-mem}{\mathit{mem}}^\ast, \\
    \href{../syntax/modules.html#syntax-module}{\mathsf{globals}}~\href{../syntax/modules.html#syntax-global}{\mathit{global}}^\ast, \\
    \href{../syntax/modules.html#syntax-module}{\mathsf{elems}}~\href{../syntax/modules.html#syntax-elem}{\mathit{elem}}^\ast, \\
    \href{../syntax/modules.html#syntax-module}{\mathsf{datas}}~\href{../syntax/modules.html#syntax-data}{\mathit{data}}^m, \\
    \href{../syntax/modules.html#syntax-module}{\mathsf{start}}~\href{../syntax/modules.html#syntax-start}{\mathit{start}}^?, \\
    \href{../syntax/modules.html#syntax-module}{\mathsf{imports}}~\href{../syntax/modules.html#syntax-import}{\mathit{import}}^\ast, \\
    \href{../syntax/modules.html#syntax-module}{\mathsf{exports}}~\href{../syntax/modules.html#syntax-export}{\mathit{export}}^\ast ~\} \\
    \end{array} \\ &amp;&amp;&amp;
  (\mathrel{\mbox{if}} m^? \neq \epsilon \vee \href{../syntax/modules.html#syntax-dataidx}{\mathrm{dataidx}}(\mathit{code}^n) = \emptyset) \\
\end{array}\end{split}\]</div>
<p>where for each <span class="math notranslate nohighlight">\(t_i^\ast, e_i\)</span> in <span class="math notranslate nohighlight">\(\mathit{code}^n\)</span>,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\href{../syntax/modules.html#syntax-func}{\mathit{func}}^n[i] = \{ \href{../syntax/modules.html#syntax-func}{\mathsf{type}}~\href{../syntax/modules.html#syntax-typeidx}{\mathit{typeidx}}^n[i], \href{../syntax/modules.html#syntax-func}{\mathsf{locals}}~t_i^\ast, \href{../syntax/modules.html#syntax-func}{\mathsf{body}}~e_i \} \\\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The version of the WebAssembly binary format may increase in the future
if backward-incompatible changes have to be made to the format.
However, such changes are expected to occur very infrequently, if ever.
The binary format is intended to be forward-compatible,
such that future extensions can be made without incrementing its version.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2022, WebAssembly Community Group.
      
    </div>

    

    
  </body>
</html>