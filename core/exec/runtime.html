<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Runtime Structure &#8212; WebAssembly 3.0 (2025-11-01)</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=057308f9" />
    <script src="../_static/documentation_options.js?v=0fddc611"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>window.MathJax = {"tex": {"maxBuffer": 30720, "macros": {"multicolumn": ["", 2]}}, "options": {"menuOptions": {"settings": {"enrich": false}}}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Numerics" href="numerics.html" />
    <link rel="prev" title="Conventions" href="conventions.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/webassembly.png" alt="Logo of WebAssembly"/>
            </a></p><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syntax/index.html">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../valid/index.html">Validation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Execution</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="conventions.html">Conventions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Runtime Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="numerics.html">Numerics</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="values.html">Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="instructions.html">Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../binary/index.html">Binary Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../text/index.html">Text Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index.html">Appendix</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index-types.html">Index of Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index-instructions.html">Index of Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index-rules.html">Index of Semantic Rules</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="../genindex.html">Index</a></li>
    
    <li class="toctree-l1"><a href="../_download/WebAssembly.pdf">Download as PDF</a></li>
    
</ul>

<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="runtime-structure">
<span id="syntax-runtime"></span><span id="index-0"></span><h1>Runtime Structure<a class="headerlink" href="#runtime-structure" title="Link to this heading">¶</a></h1>
<p><a class="reference internal" href="#store"><span class="std std-ref">Store</span></a>, <a class="reference internal" href="#stack"><span class="std std-ref">stack</span></a>, and other <em>runtime structure</em> forming the WebAssembly abstract machine, such as <a class="reference internal" href="#syntax-val"><span class="std std-ref">values</span></a> or <a class="reference internal" href="#syntax-moduleinst"><span class="std std-ref">module instances</span></a>, are made precise in terms of additional auxiliary syntax.</p>
<section id="values">
<span id="syntax-pack"></span><span id="syntax-val"></span><span id="syntax-nullref"></span><span id="syntax-ref-extern"></span><span id="syntax-ref-host"></span><span id="syntax-ref-exn"></span><span id="syntax-ref-array"></span><span id="syntax-ref-struct"></span><span id="syntax-ref-i31num"></span><span id="syntax-addrref"></span><span id="syntax-ref"></span><span id="syntax-vec"></span><span id="syntax-num"></span><span id="index-1"></span><h2>Values<a class="headerlink" href="#values" title="Link to this heading">¶</a></h2>
<p>WebAssembly computations manipulate <em>values</em> of either the four basic <a class="reference internal" href="../syntax/types.html#syntax-numtype"><span class="std std-ref">number types</span></a>, i.e., <a class="reference internal" href="../syntax/values.html#syntax-int"><span class="std std-ref">integers</span></a> and <a class="reference internal" href="../syntax/values.html#syntax-float"><span class="std std-ref">floating-point data</span></a> of 32 or 64 bit width each, or <a class="reference internal" href="../syntax/values.html#syntax-vecnum"><span class="std std-ref">vectors</span></a> of 128 bit width, or of <a class="reference internal" href="../syntax/types.html#syntax-reftype"><span class="std std-ref">reference type</span></a>.</p>
<p>In most places of the semantics, values of different types can occur.
In order to avoid ambiguities, values are therefore represented with an abstract syntax that makes their type explicit.
It is convenient to reuse the same notation as for the <span class="math notranslate nohighlight">\(\mathsf{const}\)</span> <a class="reference internal" href="../syntax/instructions.html#syntax-const"><span class="std std-ref">instructions</span></a> and <span class="math notranslate nohighlight">\(\mathsf{ref{.}null}\)</span> producing them.</p>
<p>References other than null are represented with additional <a class="reference internal" href="#syntax-instr-admin"><span class="std std-ref">administrative instructions</span></a>.
They either are <em>scalar references</em>, containing a 31-bit <a class="reference internal" href="../syntax/values.html#syntax-int"><span class="std std-ref">integer</span></a>,
<em>structure references</em>, pointing to a specific <a class="reference internal" href="#syntax-structaddr"><span class="std std-ref">structure address</span></a>,
<em>array references</em>, pointing to a specific <a class="reference internal" href="#syntax-arrayaddr"><span class="std std-ref">array address</span></a>,
<em>function references</em>, pointing to a specific <a class="reference internal" href="#syntax-funcaddr"><span class="std std-ref">function address</span></a>,
<em>exception references</em>, pointing to a specific <a class="reference internal" href="#syntax-exnaddr"><span class="std std-ref">exception address</span></a>,
or <em>host references</em> pointing to an uninterpreted form of <a class="reference internal" href="#syntax-hostaddr"><span class="std std-ref">host address</span></a> defined by the <a class="reference internal" href="../intro/overview.html#embedder"><span class="std std-ref">embedder</span></a>.
Any of the aformentioned references can furthermore be wrapped up as an <em>external reference</em>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-val}{\mathit{val}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-num}{\mathit{num}}} ~~|~~ {\href{../exec/runtime.html#syntax-vec}{\mathit{vec}}} ~~|~~ {\href{../exec/runtime.html#syntax-ref}{\mathit{ref}}} \\[0.8ex]
&amp; {\href{../exec/runtime.html#syntax-num}{\mathit{num}}} &amp; ::= &amp; {\href{../syntax/types.html#syntax-numtype}{\mathit{numtype}}}{.}\href{../syntax/instructions.html#syntax-instr-numeric}{\mathsf{const}}~{{\href{../exec/runtime.html#syntax-num}{\mathit{num}}}}_{{\href{../syntax/types.html#syntax-numtype}{\mathit{numtype}}}} \\[0.8ex]
&amp; {\href{../exec/runtime.html#syntax-vec}{\mathit{vec}}} &amp; ::= &amp; {\href{../syntax/types.html#syntax-vectype}{\mathit{vectype}}}{.}\href{../syntax/instructions.html#syntax-instr-vec}{\mathsf{const}}~{{\href{../exec/runtime.html#syntax-vec}{\mathit{vec}}}}_{{\href{../syntax/types.html#syntax-vectype}{\mathit{vectype}}}} \\[0.8ex]
&amp; {\href{../exec/runtime.html#syntax-ref}{\mathit{ref}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addrref}{\mathit{addrref}}} \\
&amp; &amp; | &amp; \href{../syntax/instructions.html#syntax-instr-ref}{\mathsf{ref{.}null}}~{\href{../syntax/types.html#syntax-heaptype}{\mathit{heaptype}}} \\[0.8ex]
&amp; {\href{../exec/runtime.html#syntax-addrref}{\mathit{addrref}}} &amp; ::= &amp; \href{../exec/runtime.html#syntax-ref}{\mathsf{ref{.}i\scriptstyle31}}~{\href{../syntax/values.html#syntax-int}{\mathit{u\scriptstyle\kern-0.1em31}}} \\
&amp; &amp; | &amp; \href{../exec/runtime.html#syntax-ref}{\mathsf{ref{.}struct}}~{\href{../exec/runtime.html#syntax-structaddr}{\mathit{structaddr}}} \\
&amp; &amp; | &amp; \href{../exec/runtime.html#syntax-ref}{\mathsf{ref{.}array}}~{\href{../exec/runtime.html#syntax-arrayaddr}{\mathit{arrayaddr}}} \\
&amp; &amp; | &amp; \href{../exec/runtime.html#syntax-ref}{\mathsf{ref{.}func}}~{\href{../exec/runtime.html#syntax-funcaddr}{\mathit{funcaddr}}} \\
&amp; &amp; | &amp; \href{../exec/runtime.html#syntax-ref}{\mathsf{ref{.}exn}}~{\href{../exec/runtime.html#syntax-exnaddr}{\mathit{exnaddr}}} \\
&amp; &amp; | &amp; \href{../exec/runtime.html#syntax-ref}{\mathsf{ref{.}host}}~{\href{../exec/runtime.html#syntax-hostaddr}{\mathit{hostaddr}}} \\
&amp; &amp; | &amp; \href{../exec/runtime.html#syntax-ref}{\mathsf{ref{.}extern}}~{\href{../exec/runtime.html#syntax-addrref}{\mathit{addrref}}} \\
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Future versions of WebAssembly may add additional forms of values.</p>
</div>
<p id="aux-default"><a class="reference internal" href="../syntax/types.html#syntax-valtype"><span class="std std-ref">Value types</span></a> can have an associated <em>default value</em>;
it is the respective value <span class="math notranslate nohighlight">\(0\)</span> for <a class="reference internal" href="../syntax/types.html#syntax-numtype"><span class="std std-ref">number types</span></a>, <span class="math notranslate nohighlight">\(0\)</span> for <a class="reference internal" href="../syntax/types.html#syntax-vectype"><span class="std std-ref">vector types</span></a>, and null for nullable <a class="reference internal" href="../syntax/types.html#syntax-reftype"><span class="std std-ref">reference types</span></a>.
For other references, no default value is defined, <span class="math notranslate nohighlight">\({{\href{../exec/runtime.html#aux-default}{\mathrm{default}}}}_{t}\)</span> hence is an optional value <span class="math notranslate nohighlight">\({{\href{../exec/runtime.html#syntax-val}{\mathit{val}}}^?}\)</span>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}lcl&#64;{}l&#64;{}}
{{\href{../exec/runtime.html#aux-default}{\mathrm{default}}}}_{{\href{../syntax/types.html#syntax-numtype}{\mathsf{i}}}{{\href{../syntax/types.html#syntax-numtype}{\scriptstyle\kern-0.1emN}}}} &amp; = &amp; ({\href{../syntax/types.html#syntax-numtype}{\mathsf{i}}}{{\href{../syntax/types.html#syntax-numtype}{\scriptstyle\kern-0.1emN}}}{.}\href{../syntax/instructions.html#syntax-instr-numeric}{\mathsf{const}}~0) \\
{{\href{../exec/runtime.html#aux-default}{\mathrm{default}}}}_{{\href{../syntax/types.html#syntax-numtype}{\mathsf{f}}}{{\href{../syntax/types.html#syntax-numtype}{\scriptstyle\kern-0.1emN}}}} &amp; = &amp; ({\href{../syntax/types.html#syntax-numtype}{\mathsf{f}}}{{\href{../syntax/types.html#syntax-numtype}{\scriptstyle\kern-0.1emN}}}{.}\href{../syntax/instructions.html#syntax-instr-numeric}{\mathsf{const}}~{+0}) \\
{{\href{../exec/runtime.html#aux-default}{\mathrm{default}}}}_{{\href{../syntax/types.html#syntax-numtype}{\mathsf{v}}}{{\href{../syntax/types.html#syntax-numtype}{\scriptstyle\kern-0.1emN}}}} &amp; = &amp; ({\href{../syntax/types.html#syntax-numtype}{\mathsf{v}}}{{\href{../syntax/types.html#syntax-numtype}{\scriptstyle\kern-0.1emN}}}{.}\href{../syntax/instructions.html#syntax-instr-vec}{\mathsf{const}}~0) \\
{{\href{../exec/runtime.html#aux-default}{\mathrm{default}}}}_{\href{../syntax/types.html#syntax-reftype}{\mathsf{ref}}~\href{../syntax/types.html#syntax-reftype}{\mathsf{null}}~{\mathit{ht}}} &amp; = &amp; (\href{../syntax/instructions.html#syntax-instr-ref}{\mathsf{ref{.}null}}~{\mathit{ht}}) \\
{{\href{../exec/runtime.html#aux-default}{\mathrm{default}}}}_{\href{../syntax/types.html#syntax-reftype}{\mathsf{ref}}~{\mathit{ht}}} &amp; = &amp; \epsilon \\
\end{array}\end{split}\]</div>
<section id="convention">
<h3>Convention<a class="headerlink" href="#convention" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The meta variable <span class="math notranslate nohighlight">\(r\)</span> ranges over reference values where clear from context.</p></li>
</ul>
</section>
</section>
<section id="results">
<span id="syntax-result"></span><span id="index-2"></span><h2>Results<a class="headerlink" href="#results" title="Link to this heading">¶</a></h2>
<p>A <em>result</em> is the outcome of a computation.
It is either a sequence of <a class="reference internal" href="#syntax-val"><span class="std std-ref">values</span></a>, a thrown <a class="reference internal" href="instructions.html#exec-throw-ref"><span class="std std-ref">exception</span></a>, or a <a class="reference internal" href="#syntax-trap"><span class="std std-ref">trap</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-result}{\mathit{result}}} &amp; ::= &amp; {{\href{../exec/runtime.html#syntax-val}{\mathit{val}}}^\ast} ~~|~~ ( \href{../exec/runtime.html#syntax-ref}{\mathsf{ref{.}exn}}~{\href{../exec/runtime.html#syntax-exnaddr}{\mathit{exnaddr}}} )~\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{throw\_ref}} ~~|~~ \href{../exec/runtime.html#syntax-trap}{\mathsf{trap}} \\
\end{array}\end{split}\]</div>
</section>
<section id="store">
<span id="syntax-store"></span><span id="index-3"></span><span id="id1"></span><h2>Store<a class="headerlink" href="#store" title="Link to this heading">¶</a></h2>
<p>The <em>store</em> represents all global state that can be manipulated by WebAssembly programs.
It consists of the runtime representation of all <em>instances</em> of
<a class="reference internal" href="#syntax-funcinst"><span class="std std-ref">functions</span></a>,
<a class="reference internal" href="#syntax-tableinst"><span class="std std-ref">tables</span></a>,
<a class="reference internal" href="#syntax-meminst"><span class="std std-ref">memories</span></a>,
<a class="reference internal" href="#syntax-globalinst"><span class="std std-ref">globals</span></a>,
<a class="reference internal" href="#syntax-taginst"><span class="std std-ref">tags</span></a>,
<a class="reference internal" href="#syntax-eleminst"><span class="std std-ref">element segments</span></a>,
<a class="reference internal" href="#syntax-datainst"><span class="std std-ref">data segments</span></a>,
and
<a class="reference internal" href="#syntax-structinst"><span class="std std-ref">structures</span></a>,
<a class="reference internal" href="#syntax-arrayinst"><span class="std std-ref">arrays</span></a> or
<a class="reference internal" href="#syntax-exninst"><span class="std std-ref">exceptions</span></a>
that have been <a class="reference internal" href="modules.html#alloc"><span class="std std-ref">allocated</span></a> during the life time of the abstract machine.</p>
<p>It is an invariant of the semantics that no element or data instance is <a class="reference internal" href="#syntax-addr"><span class="std std-ref">addressed</span></a> from anywhere else but the owning module instances.</p>
<p>Syntactically, the store is defined as a <a class="reference internal" href="../syntax/conventions.html#notation-record"><span class="std std-ref">record</span></a> listing the existing instances of each category:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-store}{\mathit{store}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-store}{\mathsf{tags}}~{{\href{../exec/runtime.html#syntax-taginst}{\mathit{taginst}}}^\ast} \\
\href{../exec/runtime.html#syntax-store}{\mathsf{globals}}~{{\href{../exec/runtime.html#syntax-globalinst}{\mathit{globalinst}}}^\ast} \\
\href{../exec/runtime.html#syntax-store}{\mathsf{mems}}~{{\href{../exec/runtime.html#syntax-meminst}{\mathit{meminst}}}^\ast} \\
\href{../exec/runtime.html#syntax-store}{\mathsf{tables}}~{{\href{../exec/runtime.html#syntax-tableinst}{\mathit{tableinst}}}^\ast} \\
\href{../exec/runtime.html#syntax-store}{\mathsf{funcs}}~{{\href{../exec/runtime.html#syntax-funcinst}{\mathit{funcinst}}}^\ast} \\
\href{../exec/runtime.html#syntax-store}{\mathsf{datas}}~{{\href{../exec/runtime.html#syntax-datainst}{\mathit{datainst}}}^\ast} \\
\href{../exec/runtime.html#syntax-store}{\mathsf{elems}}~{{\href{../exec/runtime.html#syntax-eleminst}{\mathit{eleminst}}}^\ast} \\
\href{../exec/runtime.html#syntax-store}{\mathsf{structs}}~{{\href{../exec/runtime.html#syntax-structinst}{\mathit{structinst}}}^\ast} \\
\href{../exec/runtime.html#syntax-store}{\mathsf{arrays}}~{{\href{../exec/runtime.html#syntax-arrayinst}{\mathit{arrayinst}}}^\ast} \\
\href{../exec/runtime.html#syntax-store}{\mathsf{exns}}~{{\href{../exec/runtime.html#syntax-exninst}{\mathit{exninst}}}^\ast} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In practice, implementations may apply techniques like garbage collection or reference counting to remove objects from the store that are no longer referenced.
However, such techniques are not semantically observable,
and hence outside the scope of this specification.</p>
</div>
<section id="id2">
<h3>Convention<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The meta variable <span class="math notranslate nohighlight">\(s\)</span> ranges over stores where clear from context.</p></li>
</ul>
</section>
</section>
<section id="addresses">
<span id="syntax-addr"></span><span id="syntax-hostaddr"></span><span id="syntax-arrayaddr"></span><span id="syntax-exnaddr"></span><span id="syntax-structaddr"></span><span id="syntax-dataaddr"></span><span id="syntax-elemaddr"></span><span id="syntax-tagaddr"></span><span id="syntax-globaladdr"></span><span id="syntax-memaddr"></span><span id="syntax-tableaddr"></span><span id="syntax-funcaddr"></span><span id="index-4"></span><h2>Addresses<a class="headerlink" href="#addresses" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="#syntax-funcinst"><span class="std std-ref">Function instances</span></a>,
<a class="reference internal" href="#syntax-tableinst"><span class="std std-ref">table instances</span></a>,
<a class="reference internal" href="#syntax-meminst"><span class="std std-ref">memory instances</span></a>,
<a class="reference internal" href="#syntax-globalinst"><span class="std std-ref">global instances</span></a>,
<a class="reference internal" href="#syntax-taginst"><span class="std std-ref">tag instances</span></a>,
<a class="reference internal" href="#syntax-eleminst"><span class="std std-ref">element instances</span></a>,
<a class="reference internal" href="#syntax-datainst"><span class="std std-ref">data instances</span></a>
and
<a class="reference internal" href="#syntax-structinst"><span class="std std-ref">structure</span></a>,
<a class="reference internal" href="#syntax-arrayinst"><span class="std std-ref">array</span></a> or
<a class="reference internal" href="#syntax-exninst"><span class="std std-ref">exception instances</span></a>
in the <a class="reference internal" href="#syntax-store"><span class="std std-ref">store</span></a> are referenced with abstract <em>addresses</em>.
These are simply indices into the respective store component.
In addition, an <a class="reference internal" href="../intro/overview.html#embedder"><span class="std std-ref">embedder</span></a> may supply an uninterpreted set of <em>host addresses</em>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} &amp; ::= &amp; 0 ~~|~~ 1 ~~|~~ 2 ~~|~~ \dots \\
&amp; {\href{../exec/runtime.html#syntax-funcaddr}{\mathit{funcaddr}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} \\
&amp; {\href{../exec/runtime.html#syntax-tableaddr}{\mathit{tableaddr}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} \\
&amp; {\href{../exec/runtime.html#syntax-memaddr}{\mathit{memaddr}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} \\
&amp; {\href{../exec/runtime.html#syntax-globaladdr}{\mathit{globaladdr}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} \\
&amp; {\href{../exec/runtime.html#syntax-tagaddr}{\mathit{tagaddr}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} \\
&amp; {\href{../exec/runtime.html#syntax-elemaddr}{\mathit{elemaddr}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} \\
&amp; {\href{../exec/runtime.html#syntax-dataaddr}{\mathit{dataaddr}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} \\
&amp; {\href{../exec/runtime.html#syntax-structaddr}{\mathit{structaddr}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} \\
&amp; {\href{../exec/runtime.html#syntax-arrayaddr}{\mathit{arrayaddr}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} \\
&amp; {\href{../exec/runtime.html#syntax-hostaddr}{\mathit{hostaddr}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}} \\
\end{array}\end{split}\]</div>
<p>An <a class="reference internal" href="../intro/overview.html#embedder"><span class="std std-ref">embedder</span></a> may assign identity to <a class="reference internal" href="../syntax/modules.html#syntax-export"><span class="std std-ref">exported</span></a> store objects corresponding to their addresses,
even where this identity is not observable from within WebAssembly code itself
(such as for <a class="reference internal" href="#syntax-funcinst"><span class="std std-ref">function instances</span></a> or immutable <a class="reference internal" href="#syntax-globalinst"><span class="std std-ref">globals</span></a>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Addresses are <em>dynamic</em>, globally unique references to runtime objects,
in contrast to <a class="reference internal" href="../syntax/modules.html#syntax-index"><span class="std std-ref">indices</span></a>,
which are <em>static</em>, module-local references to their original definitions.
A <em>memory address</em> <span class="math notranslate nohighlight">\(\href{../exec/runtime.html#syntax-memaddr}{\mathit{memaddr}}\)</span> denotes the abstract address <em>of</em> a memory <em>instance</em> in the store,
not an offset <em>inside</em> a memory instance.</p>
<p>There is no specific limit on the number of allocations of store objects,
hence logical addresses can be arbitrarily large natural numbers.</p>
</div>
<section id="conventions">
<span id="free-addr"></span><span id="free-labeladdr"></span><span id="free-localaddr"></span><span id="free-arrayaddr"></span><span id="free-structaddr"></span><span id="free-dataaddr"></span><span id="free-elemaddr"></span><span id="free-tagaddr"></span><span id="free-globaladdr"></span><span id="free-memaddr"></span><span id="free-tableaddr"></span><span id="free-funcaddr"></span><h3>Conventions<a class="headerlink" href="#conventions" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The notation <span class="math notranslate nohighlight">\({\mathrm{addr}}(A)\)</span> denotes the set of addresses from address space <span class="math notranslate nohighlight">\({\href{../exec/runtime.html#syntax-addr}{\mathit{addr}}}\)</span> occurring free in <span class="math notranslate nohighlight">\(A\)</span>. We sometimes reinterpret this set as the <a class="reference internal" href="../syntax/conventions.html#syntax-list"><span class="std std-ref">list</span></a> of its elements, without assuming any particular order.</p></li>
</ul>
</section>
</section>
<section id="external-addresses">
<span id="syntax-externaddr"></span><span id="index-5"></span><h2>External Addresses<a class="headerlink" href="#external-addresses" title="Link to this heading">¶</a></h2>
<p>An <em>external address</em> is the runtime <a class="reference internal" href="#syntax-addr"><span class="std std-ref">address</span></a> of an entity that can be imported or exported.
It is an <a class="reference internal" href="#syntax-addr"><span class="std std-ref">address</span></a> denoting either a
<a class="reference internal" href="#syntax-funcinst"><span class="std std-ref">function instance</span></a>,
<a class="reference internal" href="#syntax-globalinst"><span class="std std-ref">global instance</span></a>,
<a class="reference internal" href="#syntax-tableinst"><span class="std std-ref">table instance</span></a>,
<a class="reference internal" href="#syntax-meminst"><span class="std std-ref">memory instance</span></a>, or
<a class="reference internal" href="#syntax-taginst"><span class="std std-ref">tag instance</span></a>
in the shared <a class="reference internal" href="#syntax-store"><span class="std std-ref">store</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-externaddr}{\mathit{externaddr}}} &amp; ::= &amp; \href{../exec/runtime.html#syntax-externaddr}{\mathsf{tag}}~{\href{../exec/runtime.html#syntax-tagaddr}{\mathit{tagaddr}}} ~~|~~ \href{../exec/runtime.html#syntax-externaddr}{\mathsf{global}}~{\href{../exec/runtime.html#syntax-globaladdr}{\mathit{globaladdr}}} ~~|~~ \href{../exec/runtime.html#syntax-externaddr}{\mathsf{mem}}~{\href{../exec/runtime.html#syntax-memaddr}{\mathit{memaddr}}} ~~|~~ \href{../exec/runtime.html#syntax-externaddr}{\mathsf{table}}~{\href{../exec/runtime.html#syntax-tableaddr}{\mathit{tableaddr}}} ~~|~~ \href{../exec/runtime.html#syntax-externaddr}{\mathsf{func}}~{\href{../exec/runtime.html#syntax-funcaddr}{\mathit{funcaddr}}} \\
\end{array}\end{split}\]</div>
</section>
<section id="module-instances">
<span id="syntax-moduleinst"></span><span id="index-6"></span><h2>Module Instances<a class="headerlink" href="#module-instances" title="Link to this heading">¶</a></h2>
<p>A <em>module instance</em> is the runtime representation of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.
It is created by <a class="reference internal" href="modules.html#exec-instantiation"><span class="std std-ref">instantiating</span></a> a module,
and collects runtime representations of all entities that are imported, defined, or exported by the module.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-moduleinst}{\mathit{moduleinst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-moduleinst}{\mathsf{types}}~{{\href{../valid/conventions.html#syntax-deftype}{\mathit{deftype}}}^\ast} \\
\href{../exec/runtime.html#syntax-moduleinst}{\mathsf{tags}}~{{\href{../exec/runtime.html#syntax-tagaddr}{\mathit{tagaddr}}}^\ast} \\
\href{../exec/runtime.html#syntax-moduleinst}{\mathsf{globals}}~{{\href{../exec/runtime.html#syntax-globaladdr}{\mathit{globaladdr}}}^\ast} \\
\href{../exec/runtime.html#syntax-moduleinst}{\mathsf{mems}}~{{\href{../exec/runtime.html#syntax-memaddr}{\mathit{memaddr}}}^\ast} \\
\href{../exec/runtime.html#syntax-moduleinst}{\mathsf{tables}}~{{\href{../exec/runtime.html#syntax-tableaddr}{\mathit{tableaddr}}}^\ast} \\
\href{../exec/runtime.html#syntax-moduleinst}{\mathsf{funcs}}~{{\href{../exec/runtime.html#syntax-funcaddr}{\mathit{funcaddr}}}^\ast} \\
\href{../exec/runtime.html#syntax-moduleinst}{\mathsf{datas}}~{{\href{../exec/runtime.html#syntax-dataaddr}{\mathit{dataaddr}}}^\ast} \\
\href{../exec/runtime.html#syntax-moduleinst}{\mathsf{elems}}~{{\href{../exec/runtime.html#syntax-elemaddr}{\mathit{elemaddr}}}^\ast} \\
\href{../exec/runtime.html#syntax-moduleinst}{\mathsf{exports}}~{{\href{../exec/runtime.html#syntax-exportinst}{\mathit{exportinst}}}^\ast} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
<p>Each component references runtime instances corresponding to respective declarations from the original module – whether imported or defined – in the order of their static <a class="reference internal" href="../syntax/modules.html#syntax-index"><span class="std std-ref">indices</span></a>.
<a class="reference internal" href="#syntax-funcinst"><span class="std std-ref">Function instances</span></a>,
<a class="reference internal" href="#syntax-tableinst"><span class="std std-ref">table instances</span></a>,
<a class="reference internal" href="#syntax-meminst"><span class="std std-ref">memory instances</span></a>,
<a class="reference internal" href="#syntax-globalinst"><span class="std std-ref">global instances</span></a>, and
<a class="reference internal" href="#syntax-taginst"><span class="std std-ref">tag instances</span></a>
are denoted by their respective <a class="reference internal" href="#syntax-addr"><span class="std std-ref">addresses</span></a> in the <a class="reference internal" href="#syntax-store"><span class="std std-ref">store</span></a>.</p>
<p>It is an invariant of the semantics that all <a class="reference internal" href="#syntax-exportinst"><span class="std std-ref">export instances</span></a> in a given module instance have different <a class="reference internal" href="../syntax/values.html#syntax-name"><span class="std std-ref">names</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All record fields except <span class="math notranslate nohighlight">\(\mathsf{exports}\)</span> are to be considered <em>private</em> components of a module instance.
They are not accessible to other modules,
only to function instances originating from the same module.</p>
</div>
</section>
<section id="function-instances">
<span id="syntax-funcinst"></span><span id="syntax-hostfunc"></span><span id="index-7"></span><h2>Function Instances<a class="headerlink" href="#function-instances" title="Link to this heading">¶</a></h2>
<p>A <em>function instance</em> is the runtime representation of a <a class="reference internal" href="../syntax/modules.html#syntax-func"><span class="std std-ref">function</span></a>.
It effectively is a <em>closure</em> of the original function over the runtime <a class="reference internal" href="#syntax-moduleinst"><span class="std std-ref">module instance</span></a> of its originating <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.
The module instance is used to resolve references to other definitions during execution of the function.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-funcinst}{\mathit{funcinst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-funcinst}{\mathsf{type}}~{\href{../valid/conventions.html#syntax-deftype}{\mathit{deftype}}} ,  \href{../exec/runtime.html#syntax-funcinst}{\mathsf{module}}~{\href{../exec/runtime.html#syntax-moduleinst}{\mathit{moduleinst}}} ,  \href{../exec/runtime.html#syntax-funcinst}{\mathsf{code}}~{{\href{../exec/runtime.html#syntax-funcinst}{\mathit{code}}}} \} \\
\end{array} \\
&amp; {{\href{../exec/runtime.html#syntax-funcinst}{\mathit{code}}}} &amp; ::= &amp; {\href{../syntax/modules.html#syntax-func}{\mathit{func}}} ~~|~~ {\href{../exec/runtime.html#syntax-hostfunc}{\mathit{hostfunc}}} \\
\end{array}\end{split}\]</div>
<p>A <em>host function</em> is a function expressed outside WebAssembly but passed to a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a> as an <a class="reference internal" href="../syntax/modules.html#syntax-import"><span class="std std-ref">import</span></a>.
The definition and behavior of host functions are outside the scope of this specification.
For the purpose of this specification, it is assumed that when <a class="reference internal" href="instructions.html#exec-invoke-host"><span class="std std-ref">invoked</span></a>,
a host function behaves non-deterministically,
but within certain <a class="reference internal" href="instructions.html#exec-invoke-host"><span class="std std-ref">constraints</span></a> that ensure the integrity of the runtime.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Function instances are immutable, and their identity is not observable by WebAssembly code.
However, an <a class="reference internal" href="../intro/overview.html#embedder"><span class="std std-ref">embedder</span></a> might provide implicit or explicit means for distinguishing their <a class="reference internal" href="#syntax-funcaddr"><span class="std std-ref">addresses</span></a>.</p>
</div>
</section>
<section id="table-instances">
<span id="syntax-tableinst"></span><span id="index-8"></span><h2>Table Instances<a class="headerlink" href="#table-instances" title="Link to this heading">¶</a></h2>
<p>A <em>table instance</em> is the runtime representation of a <a class="reference internal" href="../syntax/modules.html#syntax-table"><span class="std std-ref">table</span></a>.
It records its <a class="reference internal" href="../syntax/types.html#syntax-tabletype"><span class="std std-ref">type</span></a> and holds a sequence of <a class="reference internal" href="#syntax-ref"><span class="std std-ref">reference values</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-tableinst}{\mathit{tableinst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-tableinst}{\mathsf{type}}~{\href{../syntax/types.html#syntax-tabletype}{\mathit{tabletype}}} ,  \href{../exec/runtime.html#syntax-tableinst}{\mathsf{elem}}~{{\href{../exec/runtime.html#syntax-ref}{\mathit{ref}}}^\ast} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
<p>Table elements can be mutated through <a class="reference internal" href="../syntax/instructions.html#syntax-instr-table"><span class="std std-ref">table instructions</span></a>, the execution of an active <a class="reference internal" href="../syntax/modules.html#syntax-elem"><span class="std std-ref">element segment</span></a>, or by external means provided by the <a class="reference internal" href="../intro/overview.html#embedder"><span class="std std-ref">embedder</span></a>.</p>
<p>It is an invariant of the semantics that all table elements have a type <a class="reference internal" href="../valid/matching.html#match-reftype"><span class="std std-ref">matching</span></a> the element type of <span class="math notranslate nohighlight">\({\href{../syntax/types.html#syntax-tabletype}{\mathit{tabletype}}}\)</span>.
It also is an invariant that the length of the element sequence never exceeds the maximum size of <span class="math notranslate nohighlight">\({\href{../syntax/types.html#syntax-tabletype}{\mathit{tabletype}}}\)</span>.</p>
</section>
<section id="memory-instances">
<span id="syntax-meminst"></span><span id="page-size"></span><span id="index-9"></span><h2>Memory Instances<a class="headerlink" href="#memory-instances" title="Link to this heading">¶</a></h2>
<p>A <em>memory instance</em> is the runtime representation of a linear <a class="reference internal" href="../syntax/modules.html#syntax-mem"><span class="std std-ref">memory</span></a>.
It records its <a class="reference internal" href="../syntax/types.html#syntax-memtype"><span class="std std-ref">type</span></a> and holds a sequence of <a class="reference internal" href="../syntax/values.html#syntax-byte"><span class="std std-ref">bytes</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-meminst}{\mathit{meminst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-meminst}{\mathsf{type}}~{\href{../syntax/types.html#syntax-memtype}{\mathit{memtype}}} ,  \href{../exec/runtime.html#syntax-meminst}{\mathsf{bytes}}~{{\href{../syntax/values.html#syntax-byte}{\mathit{byte}}}^\ast} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
<p>The length of the sequence always is a multiple of the WebAssembly <em>page size</em>, which is defined to be the constant <span class="math notranslate nohighlight">\(65536\)</span> – abbreviated <span class="math notranslate nohighlight">\(64~{\mathrm{Ki}}\)</span>.</p>
<p>A memory’s bytes can be mutated through <a class="reference internal" href="../syntax/instructions.html#syntax-instr-memory"><span class="std std-ref">memory instructions</span></a>, the execution of an active <a class="reference internal" href="../syntax/modules.html#syntax-data"><span class="std std-ref">data segment</span></a>, or by external means provided by the <a class="reference internal" href="../intro/overview.html#embedder"><span class="std std-ref">embedder</span></a>.</p>
<p>It is an invariant of the semantics that the length of the byte sequence, divided by page size, never exceeds the maximum size of <span class="math notranslate nohighlight">\({\href{../syntax/types.html#syntax-memtype}{\mathit{memtype}}}\)</span>.</p>
</section>
<section id="global-instances">
<span id="syntax-globalinst"></span><span id="index-10"></span><h2>Global Instances<a class="headerlink" href="#global-instances" title="Link to this heading">¶</a></h2>
<p>A <em>global instance</em> is the runtime representation of a <a class="reference internal" href="../syntax/modules.html#syntax-global"><span class="std std-ref">global</span></a> variable.
It records its <a class="reference internal" href="../syntax/types.html#syntax-globaltype"><span class="std std-ref">type</span></a> and holds an individual <a class="reference internal" href="#syntax-val"><span class="std std-ref">value</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-globalinst}{\mathit{globalinst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-globalinst}{\mathsf{type}}~{\href{../syntax/types.html#syntax-globaltype}{\mathit{globaltype}}} ,  \href{../exec/runtime.html#syntax-globalinst}{\mathsf{value}}~{\href{../exec/runtime.html#syntax-val}{\mathit{val}}} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
<p>The value of mutable globals can be mutated through <a class="reference internal" href="../syntax/instructions.html#syntax-instr-variable"><span class="std std-ref">variable instructions</span></a> or by external means provided by the <a class="reference internal" href="../intro/overview.html#embedder"><span class="std std-ref">embedder</span></a>.</p>
<p>It is an invariant of the semantics that the value has a type <a class="reference internal" href="../valid/matching.html#match-valtype"><span class="std std-ref">matching</span></a> the <a class="reference internal" href="../syntax/types.html#syntax-valtype"><span class="std std-ref">value type</span></a> of <span class="math notranslate nohighlight">\({\href{../syntax/types.html#syntax-globaltype}{\mathit{globaltype}}}\)</span>.</p>
</section>
<section id="tag-instances">
<span id="syntax-taginst"></span><span id="index-11"></span><h2>Tag Instances<a class="headerlink" href="#tag-instances" title="Link to this heading">¶</a></h2>
<p>A <em>tag instance</em> is the runtime representation of a <a class="reference internal" href="../syntax/modules.html#syntax-tag"><span class="std std-ref">tag</span></a> definition.
It records the <a class="reference internal" href="../valid/conventions.html#syntax-deftype"><span class="std std-ref">defined type</span></a> of the tag.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-taginst}{\mathit{taginst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-taginst}{\mathsf{type}}~{\href{../syntax/types.html#syntax-tagtype}{\mathit{tagtype}}} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
</section>
<section id="element-instances">
<span id="syntax-eleminst"></span><span id="index-12"></span><h2>Element Instances<a class="headerlink" href="#element-instances" title="Link to this heading">¶</a></h2>
<p>An <em>element instance</em> is the runtime representation of an <a class="reference internal" href="../syntax/modules.html#syntax-elem"><span class="std std-ref">element segment</span></a>.
It holds a list of references and its <a class="reference internal" href="../syntax/types.html#syntax-reftype"><span class="std std-ref">type</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-eleminst}{\mathit{eleminst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-eleminst}{\mathsf{type}}~{\href{../syntax/types.html#syntax-elemtype}{\mathit{elemtype}}} ,  \href{../exec/runtime.html#syntax-eleminst}{\mathsf{elem}}~{{\href{../exec/runtime.html#syntax-ref}{\mathit{ref}}}^\ast} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
<p>It is an invariant of the semantics that all elements of a segment have a type <a class="reference internal" href="../valid/matching.html#match-reftype"><span class="std std-ref">matching</span></a> <span class="math notranslate nohighlight">\({\href{../syntax/types.html#syntax-elemtype}{\mathit{elemtype}}}\)</span>.</p>
</section>
<section id="data-instances">
<span id="syntax-datainst"></span><span id="index-13"></span><h2>Data Instances<a class="headerlink" href="#data-instances" title="Link to this heading">¶</a></h2>
<p>A <em>data instance</em> is the runtime representation of a <a class="reference internal" href="../syntax/modules.html#syntax-data"><span class="std std-ref">data segment</span></a>.
It holds a list of <a class="reference internal" href="../syntax/values.html#syntax-byte"><span class="std std-ref">bytes</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-datainst}{\mathit{datainst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-datainst}{\mathsf{bytes}}~{{\href{../syntax/values.html#syntax-byte}{\mathit{byte}}}^\ast} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
</section>
<section id="export-instances">
<span id="syntax-exportinst"></span><span id="index-14"></span><h2>Export Instances<a class="headerlink" href="#export-instances" title="Link to this heading">¶</a></h2>
<p>An <em>export instance</em> is the runtime representation of an <a class="reference internal" href="../syntax/modules.html#syntax-export"><span class="std std-ref">export</span></a>.
It defines the export’s <a class="reference internal" href="../syntax/values.html#syntax-name"><span class="std std-ref">name</span></a> and the associated <a class="reference internal" href="#syntax-externaddr"><span class="std std-ref">external address</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-exportinst}{\mathit{exportinst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-exportinst}{\mathsf{name}}~{\href{../syntax/values.html#syntax-name}{\mathit{name}}} ,  \href{../exec/runtime.html#syntax-exportinst}{\mathsf{addr}}~{\href{../exec/runtime.html#syntax-externaddr}{\mathit{externaddr}}} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
<section id="id3">
<h3>Conventions<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>The following auxiliary functions are assumed on sequences of external addresses.
They extract addresses of a specific kind in an order-preserving fashion:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\({\href{../exec/runtime.html#syntax-externaddr}{\mathrm{funcs}}}({{\mathit{xa}}^\ast})\)</span> extracts all <a class="reference internal" href="#syntax-funcaddr"><span class="std std-ref">function addresses</span></a> from <span class="math notranslate nohighlight">\({{\mathit{xa}}^\ast}\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\({\href{../exec/runtime.html#syntax-externaddr}{\mathrm{tables}}}({{\mathit{xa}}^\ast})\)</span> extracts all <a class="reference internal" href="#syntax-funcaddr"><span class="std std-ref">table addresses</span></a> from <span class="math notranslate nohighlight">\({{\mathit{xa}}^\ast}\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\({\href{../exec/runtime.html#syntax-externaddr}{\mathrm{mems}}}({{\mathit{xa}}^\ast})\)</span> extracts all <a class="reference internal" href="#syntax-funcaddr"><span class="std std-ref">memory addresses</span></a> from <span class="math notranslate nohighlight">\({{\mathit{xa}}^\ast}\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\({\href{../exec/runtime.html#syntax-externaddr}{\mathrm{globals}}}({{\mathit{xa}}^\ast})\)</span> extracts all <a class="reference internal" href="#syntax-funcaddr"><span class="std std-ref">global addresses</span></a> from <span class="math notranslate nohighlight">\({{\mathit{xa}}^\ast}\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\({\href{../exec/runtime.html#syntax-externaddr}{\mathrm{tags}}}({{\mathit{xa}}^\ast})\)</span> extracts all <a class="reference internal" href="#syntax-funcaddr"><span class="std std-ref">tag addresses</span></a> from <span class="math notranslate nohighlight">\({{\mathit{xa}}^\ast}\)</span>.</p></li>
</ul>
</section>
</section>
<section id="aggregate-instances">
<span id="syntax-aggrinst"></span><span id="syntax-arrayinst"></span><span id="syntax-structinst"></span><span id="syntax-packval"></span><span id="syntax-fieldval"></span><span id="index-15"></span><h2>Aggregate Instances<a class="headerlink" href="#aggregate-instances" title="Link to this heading">¶</a></h2>
<p>A <em>structure instance</em> is the runtime representation of a heap object allocated from a <a class="reference internal" href="../syntax/types.html#syntax-structtype"><span class="std std-ref">structure type</span></a>.
Likewise, an <em>array instance</em> is the runtime representation of a heap object allocated from an <a class="reference internal" href="../syntax/types.html#syntax-arraytype"><span class="std std-ref">array type</span></a>.
Both record their respective <a class="reference internal" href="../valid/conventions.html#syntax-deftype"><span class="std std-ref">defined type</span></a> and hold a list of the values of their <em>fields</em>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-structinst}{\mathit{structinst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-structinst}{\mathsf{type}}~{\href{../valid/conventions.html#syntax-deftype}{\mathit{deftype}}} ,  \href{../exec/runtime.html#syntax-structinst}{\mathsf{fields}}~{{\href{../exec/runtime.html#syntax-fieldval}{\mathit{fieldval}}}^\ast} \} \\
\end{array} \\
&amp; {\href{../exec/runtime.html#syntax-arrayinst}{\mathit{arrayinst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-arrayinst}{\mathsf{type}}~{\href{../valid/conventions.html#syntax-deftype}{\mathit{deftype}}} ,  \href{../exec/runtime.html#syntax-arrayinst}{\mathsf{fields}}~{{\href{../exec/runtime.html#syntax-fieldval}{\mathit{fieldval}}}^\ast} \} \\
\end{array} \\
&amp; {\href{../exec/runtime.html#syntax-fieldval}{\mathit{fieldval}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-val}{\mathit{val}}} ~~|~~ {\href{../exec/runtime.html#syntax-packval}{\mathit{packval}}} \\
&amp; {\href{../exec/runtime.html#syntax-packval}{\mathit{packval}}} &amp; ::= &amp; {\href{../syntax/types.html#syntax-packtype}{\mathit{packtype}}}{.}\href{../exec/runtime.html#syntax-packval}{\mathsf{pack}}~{{\href{../syntax/values.html#syntax-int}{\mathit{i}\kern-0.1em}}}{N} \\
\end{array}\end{split}\]</div>
<section id="aux-unpackfield">
<span id="aux-packfield"></span><span id="id4"></span><h3>Conventions<a class="headerlink" href="#aux-unpackfield" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Conversion of a regular <a class="reference internal" href="#syntax-val"><span class="std std-ref">value</span></a> to a <a class="reference internal" href="#syntax-fieldval"><span class="std std-ref">field value</span></a> is defined as follows:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}lcl&#64;{}l&#64;{}}
{{\href{../exec/runtime.html#aux-packfield}{\mathrm{pack}}}}_{{\href{../syntax/types.html#syntax-valtype}{\mathit{valtype}}}}({\href{../exec/runtime.html#syntax-val}{\mathit{val}}}) &amp; = &amp; {\href{../exec/runtime.html#syntax-val}{\mathit{val}}} \\
{{\href{../exec/runtime.html#aux-packfield}{\mathrm{pack}}}}_{{\href{../syntax/types.html#syntax-packtype}{\mathit{packtype}}}}(\href{../syntax/types.html#syntax-numtype}{\mathsf{i\scriptstyle32}}{.}\href{../syntax/instructions.html#syntax-instr-numeric}{\mathsf{const}}~i) &amp; = &amp; {\href{../syntax/types.html#syntax-packtype}{\mathit{packtype}}}{.}\href{../exec/runtime.html#syntax-packval}{\mathsf{pack}}~{{\href{../exec/numerics.html#op-wrap}{\mathrm{wrap}}}}_{32, {|{\href{../syntax/types.html#syntax-packtype}{\mathit{packtype}}}|}}(i) \\
\end{array}\end{split}\]</div>
</li>
<li><p>The inverse conversion of a <a class="reference internal" href="#syntax-fieldval"><span class="std std-ref">field value</span></a> to a regular <a class="reference internal" href="#syntax-val"><span class="std std-ref">value</span></a> is defined as follows:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}lcl&#64;{}l&#64;{}}
{{{{\href{../exec/runtime.html#aux-unpackfield}{\mathrm{unpack}}}}_{{\href{../syntax/types.html#syntax-valtype}{\mathit{valtype}}}}^{\epsilon}}}{({\href{../exec/runtime.html#syntax-val}{\mathit{val}}})} &amp; = &amp; {\href{../exec/runtime.html#syntax-val}{\mathit{val}}} \\
{{{{\href{../exec/runtime.html#aux-unpackfield}{\mathrm{unpack}}}}_{{\href{../syntax/types.html#syntax-packtype}{\mathit{packtype}}}}^{{\href{../syntax/instructions.html#syntax-sx}{\mathit{sx}}}}}}{({\href{../syntax/types.html#syntax-packtype}{\mathit{packtype}}}{.}\href{../exec/runtime.html#syntax-packval}{\mathsf{pack}}~i)} &amp; = &amp; \href{../syntax/types.html#syntax-numtype}{\mathsf{i\scriptstyle32}}{.}\href{../syntax/instructions.html#syntax-instr-numeric}{\mathsf{const}}~{{{{\href{../exec/numerics.html#op-extend}{\mathrm{extend}}}}_{{|{\href{../syntax/types.html#syntax-packtype}{\mathit{packtype}}}|}, 32}^{{\href{../syntax/instructions.html#syntax-sx}{\mathit{sx}}}}}}{(i)} \\
\end{array}\end{split}\]</div>
</li>
</ul>
</section>
</section>
<section id="exception-instances">
<span id="syntax-exninst"></span><span id="index-16"></span><h2>Exception Instances<a class="headerlink" href="#exception-instances" title="Link to this heading">¶</a></h2>
<p>An <em>exception instance</em> is the runtime representation of an <a class="reference internal" href="../syntax/instructions.html#exception"><span class="std std-ref">exception</span></a> produced by a <span class="math notranslate nohighlight">\(\mathsf{throw}\)</span> instruction.
It holds the <a class="reference internal" href="#syntax-tagaddr"><span class="std std-ref">address</span></a> of the respective <a class="reference internal" href="../syntax/modules.html#syntax-tag"><span class="std std-ref">tag</span></a> and the argument <a class="reference internal" href="#syntax-val"><span class="std std-ref">values</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-exninst}{\mathit{exninst}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-exninst}{\mathsf{tag}}~{\href{../exec/runtime.html#syntax-tagaddr}{\mathit{tagaddr}}} ,  \href{../exec/runtime.html#syntax-exninst}{\mathsf{fields}}~{{\href{../exec/runtime.html#syntax-val}{\mathit{val}}}^\ast} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
</section>
<section id="stack">
<span id="handler"></span><span id="label"></span><span id="frame"></span><span id="syntax-handler"></span><span id="syntax-label"></span><span id="syntax-callframe"></span><span id="syntax-frame"></span><span id="index-17"></span><span id="id5"></span><h2>Stack<a class="headerlink" href="#stack" title="Link to this heading">¶</a></h2>
<p>Besides the <a class="reference internal" href="#store"><span class="std std-ref">store</span></a>, most <a class="reference internal" href="../syntax/instructions.html#syntax-instr"><span class="std std-ref">instructions</span></a> interact with an implicit <em>stack</em>.
The stack contains the two kinds of entries:</p>
<ul class="simple">
<li><p><em>Values</em>: the <em>operands</em> of instructions.</p></li>
<li><p><em>Control Frames</em>: currently active control flow structures.</p></li>
</ul>
<p>The latter can in turn be one of the following:</p>
<ul class="simple">
<li><p><em>Labels</em>: active <a class="reference internal" href="../syntax/instructions.html#syntax-instr-control"><span class="std std-ref">structured control instructions</span></a> that can be targeted by branches.</p></li>
<li><p><em>(Call) Frames</em>: the <em>activation records</em> of active <a class="reference internal" href="../syntax/modules.html#syntax-func"><span class="std std-ref">function</span></a> calls.</p></li>
<li><p><em>Handlers</em>: active exception handlers.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Where clear from context, <em>call frame</em> is abbreviated to just <em>frame</em>.</p>
</div>
<p>All these entries can occur on the stack in any order during the execution of a program.
Stack entries are described by abstract syntax as follows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible to model the WebAssembly semantics using separate stacks for operands, control constructs, and calls.
However, because the stacks are interdependent, additional book keeping about associated stack heights would be required.
For the purpose of this specification, an interleaved representation is simpler.</p>
</div>
<section id="id6">
<h3>Values<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<p>Values are represented by <a class="reference internal" href="#syntax-val"><span class="std std-ref">themselves</span></a>.</p>
</section>
<section id="labels">
<h3>Labels<a class="headerlink" href="#labels" title="Link to this heading">¶</a></h3>
<p>Labels carry an argument arity <span class="math notranslate nohighlight">\(n\)</span> and their associated branch <em>target</em>, which is expressed syntactically as an <a class="reference internal" href="../syntax/instructions.html#syntax-instr"><span class="std std-ref">instruction</span></a> sequence:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-label}{\mathit{label}}} &amp; ::= &amp; {{\href{../exec/runtime.html#syntax-label}{\mathsf{label}}}_{n}}{\{ {{\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}}^\ast} \}} \\
\end{array}\end{split}\]</div>
<p>Intuitively, <span class="math notranslate nohighlight">\({{\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}}^\ast}\)</span> is the <em>continuation</em> to execute when the branch is taken, in place of the original control construct.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For example, a loop label has the form</p>
<div class="math notranslate nohighlight">
\[{{\href{../exec/runtime.html#syntax-label}{\mathsf{label}}}_{n}}{\{ (\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{loop}}~{\mathit{bt}}~\dots) \}}\]</div>
<p>When performing a branch to this label, this executes the loop, effectively restarting it from the beginning.
Conversely, a simple block label has the form</p>
<div class="math notranslate nohighlight">
\[{{\href{../exec/runtime.html#syntax-label}{\mathsf{label}}}_{n}}{\{ \epsilon \}}\]</div>
<p>When branching, the empty continuation ends the targeted block, such that execution can proceed with consecutive instructions.</p>
</div>
</section>
<section id="call-frames">
<h3>Call Frames<a class="headerlink" href="#call-frames" title="Link to this heading">¶</a></h3>
<p>Call frames carry the return arity <span class="math notranslate nohighlight">\(n\)</span> of the respective function,
hold the values of its <a class="reference internal" href="../syntax/modules.html#syntax-local"><span class="std std-ref">locals</span></a> (including arguments) in the order corresponding to their static <a class="reference internal" href="../syntax/modules.html#syntax-localidx"><span class="std std-ref">local indices</span></a>,
and a reference to the function’s own <a class="reference internal" href="#syntax-moduleinst"><span class="std std-ref">module instance</span></a>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-callframe}{\mathit{callframe}}} &amp; ::= &amp; {{\href{../exec/runtime.html#syntax-frame}{\mathsf{frame}}}_{n}}{\{ {\href{../exec/runtime.html#syntax-frame}{\mathit{frame}}} \}} \\
&amp; {\href{../exec/runtime.html#syntax-frame}{\mathit{frame}}} &amp; ::= &amp; \{ \begin{array}[t]{&#64;{}l&#64;{}l&#64;{}}
\href{../exec/runtime.html#syntax-frame}{\mathsf{locals}}~{({{\href{../exec/runtime.html#syntax-val}{\mathit{val}}}^?})^\ast} ,  \href{../exec/runtime.html#syntax-frame}{\mathsf{module}}~{\href{../exec/runtime.html#syntax-moduleinst}{\mathit{moduleinst}}} \} \\
\end{array} \\
\end{array}\end{split}\]</div>
<p>Locals may be uninitialized, in which case they are empty.
Locals are mutated by respective <a class="reference internal" href="../syntax/instructions.html#syntax-instr-variable"><span class="std std-ref">variable instructions</span></a>.</p>
</section>
<section id="exception-handlers">
<h3>Exception Handlers<a class="headerlink" href="#exception-handlers" title="Link to this heading">¶</a></h3>
<p>Exception handlers are installed by <span class="math notranslate nohighlight">\(\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{try\_table}}\)</span> instructions and record the corresponding list of <a class="reference internal" href="../syntax/instructions.html#syntax-catch"><span class="std std-ref">catch clauses</span></a>:</p>
<div class="math notranslate nohighlight">
\[\begin{array}{llllll}
  \def\mathdef1835#1{{}}\mathdef1835{handler} &amp; \href{../exec/runtime.html#syntax-handler}{\mathit{handler}} &amp;::=&amp;
    \href{../exec/runtime.html#syntax-handler}{\mathsf{handler}}_n\{\href{../syntax/instructions.html#syntax-catch}{\mathit{catch}}^\ast\}
\end{array}\]</div>
<p>The handlers on the stack are searched when an exception is <a class="reference internal" href="../syntax/instructions.html#syntax-throw"><span class="std std-ref">thrown</span></a>.</p>
</section>
<section id="aux-blocktype">
<span id="id7"></span><h3>Conventions<a class="headerlink" href="#aux-blocktype" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The meta variable <span class="math notranslate nohighlight">\(L\)</span> ranges over labels where clear from context.</p></li>
<li><p>The meta variable <span class="math notranslate nohighlight">\(f\)</span> ranges over frame states where clear from context.</p></li>
<li><p>The meta variable <span class="math notranslate nohighlight">\(H\)</span> ranges over exception handlers where clear from context.</p></li>
<li><p>The following auxiliary definition takes a <a class="reference internal" href="../syntax/types.html#syntax-blocktype"><span class="std std-ref">block type</span></a> and looks up the <a class="reference internal" href="../valid/conventions.html#syntax-instrtype"><span class="std std-ref">instruction type</span></a> that it denotes in the current frame:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}lcl&#64;{}l&#64;{}}
{{\href{../exec/runtime.html#aux-blocktype}{\mathrm{instrtype}}}}_{z}(x) &amp; = &amp; {t_1^\ast} \rightarrow {t_2^\ast} &amp; \quad \mbox{if}~ z{.}\href{../exec/runtime.html#syntax-store}{\mathsf{types}}{}[x] \mathrel{\href{../valid/conventions.html#aux-expand-deftype}{\approx}} \href{../syntax/types.html#syntax-comptype}{\mathsf{func}}~{t_1^\ast} \href{../syntax/types.html#syntax-comptype}{\rightarrow} {t_2^\ast} \\
{{\href{../exec/runtime.html#aux-blocktype}{\mathrm{instrtype}}}}_{z}({t^?}) &amp; = &amp; \epsilon \rightarrow {t^?} \\
\end{array}\end{split}\]</div>
</li>
</ul>
</section>
</section>
<section id="administrative-instructions">
<span id="syntax-instr-admin"></span><span id="syntax-trap"></span><span id="index-18"></span><h2>Administrative Instructions<a class="headerlink" href="#administrative-instructions" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section is only relevant for the <a class="reference internal" href="conventions.html#exec-notation"><span class="std std-ref">formal notation</span></a>.</p>
</div>
<p>In order to express the reduction of <a class="reference internal" href="../intro/overview.html#trap"><span class="std std-ref">traps</span></a>, <a class="reference internal" href="../syntax/instructions.html#syntax-call"><span class="std std-ref">calls</span></a>, <a class="reference internal" href="#syntax-handler"><span class="std std-ref">exception handling</span></a>, and <a class="reference internal" href="../syntax/instructions.html#syntax-instr-control"><span class="std std-ref">control instructions</span></a>, the syntax of instructions is extended to include the following <em>administrative instructions</em>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}} &amp; ::= &amp; \dots \\
&amp; &amp; | &amp; {\href{../exec/runtime.html#syntax-addrref}{\mathit{addrref}}} \\
&amp; &amp; | &amp; {{\href{../exec/runtime.html#syntax-label}{\mathsf{label}}}_{n}}{\{ {{\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}}^\ast} \}}~{{\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}}^\ast} \\
&amp; &amp; | &amp; {{\href{../exec/runtime.html#syntax-frame}{\mathsf{frame}}}_{n}}{\{ {\href{../exec/runtime.html#syntax-frame}{\mathit{frame}}} \}}~{{\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}}^\ast} \\
&amp; &amp; | &amp; {{\href{../exec/runtime.html#syntax-handler}{\mathsf{handler}}}_{n}}{\{ {{\href{../syntax/instructions.html#syntax-catch}{\mathit{catch}}}^\ast} \}}~{{\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}}^\ast} \\
&amp; &amp; | &amp; \href{../exec/runtime.html#syntax-trap}{\mathsf{trap}} \\
\end{array}\end{split}\]</div>
<p>An <a class="reference internal" href="#syntax-addrref"><span class="std std-ref">address reference</span></a> represents an allocated <a class="reference internal" href="#syntax-ref"><span class="std std-ref">reference</span></a> value of respective form <a class="reference internal" href="conventions.html#exec-notation"><span class="std std-ref">“on the stack”</span></a>.</p>
<p>The <span class="math notranslate nohighlight">\(\mathsf{label}\)</span>, <span class="math notranslate nohighlight">\(\mathsf{frame}\)</span>, and <span class="math notranslate nohighlight">\(\mathsf{handler}\)</span> instructions model <a class="reference internal" href="#syntax-label"><span class="std std-ref">labels</span></a>, <a class="reference internal" href="#syntax-frame"><span class="std std-ref">frames</span></a>, and active <a class="reference internal" href="#syntax-handler"><span class="std std-ref">exception handlers</span></a>, respectively, <a class="reference internal" href="conventions.html#exec-notation"><span class="std std-ref">“on the stack”</span></a>.
Moreover, the administrative syntax maintains the nesting structure of the original <a class="reference internal" href="../syntax/instructions.html#syntax-instr-control"><span class="std std-ref">structured control instruction</span></a> or <a class="reference internal" href="../syntax/modules.html#syntax-func"><span class="std std-ref">function body</span></a> and their <a class="reference internal" href="../syntax/instructions.html#syntax-instrs"><span class="std std-ref">instruction sequences</span></a>.</p>
<p>The <span class="math notranslate nohighlight">\(\mathsf{trap}\)</span> instruction represents the occurrence of a trap.
Traps are bubbled up through nested instruction sequences, ultimately reducing the entire program to a single <span class="math notranslate nohighlight">\(\mathsf{trap}\)</span> instruction, signalling abrupt termination.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For example, the <a class="reference internal" href="instructions.html#exec-block"><span class="std std-ref">reduction rule</span></a> for <span class="math notranslate nohighlight">\(\mathsf{block}\)</span> is:</p>
<div class="math notranslate nohighlight">
\[(\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{block}}~{\mathit{bt}}~{{\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}}^\ast}) \href{../exec/conventions.html#exec-notation}{\hookrightarrow} ({{\href{../exec/runtime.html#syntax-label}{\mathsf{label}}}_{n}}{\{ \epsilon \}}~{{\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}}^\ast})\]</div>
<p>if the <a class="reference internal" href="../syntax/types.html#syntax-blocktype"><span class="std std-ref">block type</span></a> <span class="math notranslate nohighlight">\({\mathit{bt}}\)</span> denotes a <a class="reference internal" href="../syntax/types.html#syntax-functype"><span class="std std-ref">function type</span></a> <span class="math notranslate nohighlight">\(\href{../syntax/types.html#syntax-comptype}{\mathsf{func}}~{t_1^{m}} \href{../syntax/types.html#syntax-comptype}{\rightarrow} {t_2^{n}}\)</span>,
such that <span class="math notranslate nohighlight">\(n\)</span> is the block’s result arity.
This rule replaces the block with a label instruction,
which can be interpreted as “pushing” the label on the stack.
When its end is reached, i.e., the inner instruction sequence has been reduced to the empty sequence – or rather, a sequence of <span class="math notranslate nohighlight">\(n\)</span> <a class="reference internal" href="#syntax-val"><span class="std std-ref">values</span></a> representing the results – then the <span class="math notranslate nohighlight">\(\mathsf{label}\)</span> instruction is eliminated courtesy of its own <a class="reference internal" href="instructions.html#exec-label"><span class="std std-ref">reduction rule</span></a>:</p>
<div class="math notranslate nohighlight">
\[({{\href{../exec/runtime.html#syntax-label}{\mathsf{label}}}_{n}}{\{ {{\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}}^\ast} \}}~{{\href{../exec/runtime.html#syntax-val}{\mathit{val}}}^\ast}) \href{../exec/conventions.html#exec-notation}{\hookrightarrow} {{\href{../exec/runtime.html#syntax-val}{\mathit{val}}}^\ast}\]</div>
<p>This can be interpreted as removing the label from the stack and only leaving the locally accumulated operand values.
Validation guarantees that <span class="math notranslate nohighlight">\(n\)</span> matches the number <span class="math notranslate nohighlight">\({|{{\href{../exec/runtime.html#syntax-val}{\mathit{val}}}^\ast}|}\)</span> of resulting values at this point.</p>
</div>
<section id="configurations">
<span id="syntax-config"></span><span id="syntax-thread"></span><span id="syntax-state"></span><span id="index-19"></span><h3>Configurations<a class="headerlink" href="#configurations" title="Link to this heading">¶</a></h3>
<p>A <em>configuration</em> describes the current computation.
It consists of the computations’s <em>state</em> and the sequence of <a class="reference internal" href="../syntax/instructions.html#syntax-instr"><span class="std std-ref">instructions</span></a> left to execute.
The state in turn consists of a global <a class="reference internal" href="#syntax-store"><span class="std std-ref">store</span></a> and a current <a class="reference internal" href="#syntax-frame"><span class="std std-ref">frame</span></a> referring to the <a class="reference internal" href="#syntax-moduleinst"><span class="std std-ref">module instance</span></a> in which the computation runs, i.e., where the current function originates from.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}[t]{&#64;{}l&#64;{}rrl&#64;{}l&#64;{}}
&amp; {\href{../exec/runtime.html#syntax-config}{\mathit{config}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-state}{\mathit{state}}} ; {{\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}}^\ast} \\[0.8ex]
&amp; {\href{../exec/runtime.html#syntax-state}{\mathit{state}}} &amp; ::= &amp; {\href{../exec/runtime.html#syntax-store}{\mathit{store}}} ; {\href{../exec/runtime.html#syntax-frame}{\mathit{frame}}} \\
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current version of WebAssembly is single-threaded,
but configurations with multiple threads may be supported in the future.</p>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2017-2025, WebAssembly Community Group.
      
    </div>

    

    
  </body>
</html>