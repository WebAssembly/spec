<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Custom Sections and Annotations &#8212; WebAssembly 3.0 (2025-10-08)</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=057308f9" />
    <script src="../_static/documentation_options.js?v=d9024698"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>window.MathJax = {"tex": {"maxBuffer": 30720, "macros": {"multicolumn": ["", 2]}}, "options": {"menuOptions": {"settings": {"enrich": false}}}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Change History" href="changes.html" />
    <link rel="prev" title="Validation Algorithm" href="algorithm.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/webassembly.png" alt="Logo of WebAssembly"/>
            </a></p><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syntax/index.html">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../valid/index.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exec/index.html">Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../binary/index.html">Binary Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../text/index.html">Text Format</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Appendix</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="embedding.html">Embedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiles.html">Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="implementation.html">Implementation Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="properties.html">Type Soundness</a></li>
<li class="toctree-l2"><a class="reference internal" href="properties.html#type-system-properties">Type System Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="algorithm.html">Validation Algorithm</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Custom Sections and Annotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="changes.html">Change History</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-types.html">Index of Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-instructions.html">Index of Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-rules.html">Index of Semantic Rules</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-types.html">Index of Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="index-instructions.html">Index of Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="index-rules.html">Index of Semantic Rules</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="../genindex.html">Index</a></li>
    
    <li class="toctree-l1"><a href="../_download/WebAssembly.pdf">Download as PDF</a></li>
    
</ul>

<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="custom-sections-and-annotations">
<span id="index-0"></span><h1>Custom Sections and Annotations<a class="headerlink" href="#custom-sections-and-annotations" title="Link to this heading">¶</a></h1>
<p>This appendix defines dedicated <a class="reference internal" href="../binary/modules.html#binary-customsec"><span class="std std-ref">custom sections</span></a> for WebAssembly’s <a class="reference internal" href="../binary/index.html#binary"><span class="std std-ref">binary format</span></a> and <a class="reference internal" href="../text/lexical.html#text-annot"><span class="std std-ref">annotations</span></a> for the text format.
Such sections or annotations do not contribute to, or otherwise affect, the WebAssembly semantics, and may be ignored by an implementation.
However, they provide useful meta data that implementations can make use of to improve user experience or take compilation hints.</p>
<section id="name-section">
<span id="binary-namesec"></span><span id="index-1"></span><h2>Name Section<a class="headerlink" href="#name-section" title="Link to this heading">¶</a></h2>
<p>The <em>name section</em> is a <a class="reference internal" href="../binary/modules.html#binary-customsec"><span class="std std-ref">custom section</span></a> whose name string is itself <span class="math notranslate nohighlight">\(\def\mathdef99#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef99{name}\)</span>.
The name section should appear only once in a module, and only after the <a class="reference internal" href="../binary/modules.html#binary-datasec"><span class="std std-ref">data section</span></a>.</p>
<p>The purpose of this section is to attach printable names to definitions in a module, which e.g. can be used by a debugger or when parts of the module are to be rendered in <a class="reference internal" href="../text/index.html#text"><span class="std std-ref">text form</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All <a class="reference internal" href="../binary/values.html#binary-name"><span class="std std-ref">names</span></a> are represented in <a class="reference external" href="https://www.unicode.org/versions/latest/">Unicode</a> encoded in UTF-8.
Names need not be unique.</p>
</div>
<section id="subsections">
<span id="binary-namesubsection"></span><h3>Subsections<a class="headerlink" href="#subsections" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="../binary/modules.html#binary-customsec"><span class="std std-ref">data</span></a> of a name section consists of a sequence of <em>subsections</em>.
Each subsection consists of a</p>
<ul class="simple">
<li><p>a one-byte subsection <em>id</em>,</p></li>
<li><p>the <span class="math notranslate nohighlight">\(\href{../syntax/values.html#syntax-int}{\mathit{u\scriptstyle\kern-0.1em32}}\)</span> <em>size</em> of the contents, in bytes,</p></li>
<li><p>the actual <em>contents</em>, whose structure is dependent on the subsection id.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llcll}
\def\mathdef68#1{{}}\mathdef68{name section} &amp; \href{../appendix/custom.html#binary-namesubsection}{\mathtt{namesec}} &amp;::=&amp;
  \href{../binary/modules.html#binary-section}{\mathtt{section}}_0(\href{../appendix/custom.html#binary-namesubsection}{\mathtt{namedata}}) \\
\def\mathdef68#1{{}}\mathdef68{name data} &amp; \href{../appendix/custom.html#binary-namesubsection}{\mathtt{namedata}} &amp;::=&amp;
  n{:}\href{../binary/values.html#binary-name}{\mathtt{name}} &amp; (\mathrel{\mbox{if}} n = \def\mathdef100#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef100{name}) \\ &amp;&amp;&amp;
  \href{../appendix/custom.html#binary-modulenamesec}{\mathtt{modulenamesubsec}}^? \\ &amp;&amp;&amp;
  \href{../appendix/custom.html#binary-funcnamesec}{\mathtt{funcnamesubsec}}^? \\ &amp;&amp;&amp;
  \href{../appendix/custom.html#binary-localnamesec}{\mathtt{localnamesubsec}}^? \\ &amp;&amp;&amp;
  \href{../appendix/custom.html#binary-typenamesec}{\mathtt{typenamesubsec}}^? \\ &amp;&amp;&amp;
  \href{../appendix/custom.html#binary-fieldnamesec}{\mathtt{fieldnamesubsec}}^? \\ &amp;&amp;&amp;
  \href{../appendix/custom.html#binary-tagnamesec}{\mathtt{tagnamesubsec}}^? \\
\def\mathdef68#1{{}}\mathdef68{name subsection} &amp; \href{../appendix/custom.html#binary-namesubsection}{\mathtt{namesubsection}}_N(\mathtt{B}) &amp;::=&amp;
  N{:}\href{../binary/values.html#binary-byte}{\mathtt{byte}}~~\mathit{size}{:}\href{../binary/values.html#binary-int}{\def\mathdef75#1{{\mathtt{u}#1}}\mathdef75{\mathtt{32}}}~~\mathtt{B}
    &amp; (\mathrel{\mbox{if}} \mathit{size} = ||\mathtt{B}||) \\
\end{array}\end{split}\]</div>
<p>The following subsection ids are used:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Id</p></th>
<th class="head"><p>Subsection</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p><a class="reference internal" href="#binary-modulenamesec"><span class="std std-ref">module name</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p><a class="reference internal" href="#binary-funcnamesec"><span class="std std-ref">function names</span></a></p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p><a class="reference internal" href="#binary-localnamesec"><span class="std std-ref">local names</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p><a class="reference internal" href="#binary-typenamesec"><span class="std std-ref">type names</span></a></p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p><a class="reference internal" href="#binary-fieldnamesec"><span class="std std-ref">field names</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p><a class="reference internal" href="#binary-tagnamesec"><span class="std std-ref">tag names</span></a></p></td>
</tr>
</tbody>
</table>
<p>Each subsection may occur at most once, and in order of increasing id.</p>
</section>
<section id="name-maps">
<span id="binary-namemap"></span><span id="binary-indirectnamemap"></span><span id="index-2"></span><h3>Name Maps<a class="headerlink" href="#name-maps" title="Link to this heading">¶</a></h3>
<p>A <em>name map</em> assigns <a class="reference internal" href="../syntax/values.html#syntax-name"><span class="std std-ref">names</span></a> to <a class="reference internal" href="../syntax/modules.html#syntax-index"><span class="std std-ref">indices</span></a> in a given <a class="reference internal" href="../syntax/modules.html#syntax-index"><span class="std std-ref">index space</span></a>.
It consists of a <a class="reference internal" href="../binary/conventions.html#binary-list"><span class="std std-ref">list</span></a> of index/name pairs in order of increasing index value.
Each index must be unique, but the assigned names need not be.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{name map} &amp; \href{../appendix/custom.html#binary-namemap}{\mathtt{namemap}} &amp;::=&amp;
  \href{../binary/conventions.html#binary-list}{\mathtt{list}}(\href{../appendix/custom.html#binary-namemap}{\mathtt{nameassoc}}) \\
\def\mathdef68#1{{}}\mathdef68{name association} &amp; \href{../appendix/custom.html#binary-namemap}{\mathtt{nameassoc}} &amp;::=&amp;
  \href{../binary/modules.html#binary-index}{\mathtt{idx}}~\href{../binary/values.html#binary-name}{\mathtt{name}} \\
\end{array}\end{split}\]</div>
<p>An <em>indirect name map</em> assigns <a class="reference internal" href="../syntax/values.html#syntax-name"><span class="std std-ref">names</span></a> to a two-dimensional <a class="reference internal" href="../syntax/modules.html#syntax-index"><span class="std std-ref">index space</span></a>, where secondary indices are <em>grouped</em> by primary indices.
It consists of a list of primary index/name map pairs in order of increasing index value, where each name map in turn maps secondary indices to names.
Each primary index must be unique, and likewise each secondary index per individual name map.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{indirect name map} &amp; \href{../appendix/custom.html#binary-indirectnamemap}{\mathtt{indirectnamemap}} &amp;::=&amp;
  \href{../binary/conventions.html#binary-list}{\mathtt{list}}(\href{../appendix/custom.html#binary-indirectnamemap}{\mathtt{indirectnameassoc}}) \\
\def\mathdef68#1{{}}\mathdef68{indirect name association} &amp; \href{../appendix/custom.html#binary-indirectnamemap}{\mathtt{indirectnameassoc}} &amp;::=&amp;
  \href{../binary/modules.html#binary-index}{\mathtt{idx}}~\href{../appendix/custom.html#binary-namemap}{\mathtt{namemap}} \\
\end{array}\end{split}\]</div>
</section>
<section id="module-names">
<span id="binary-modulenamesec"></span><span id="index-3"></span><h3>Module Names<a class="headerlink" href="#module-names" title="Link to this heading">¶</a></h3>
<p>The <em>module name subsection</em> has the id 0.
It simply consists of a single <a class="reference internal" href="../binary/values.html#binary-name"><span class="std std-ref">name</span></a> that is assigned to the module itself.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{module name subsection} &amp; \href{../appendix/custom.html#binary-modulenamesec}{\mathtt{modulenamesubsec}} &amp;::=&amp;
  \href{../appendix/custom.html#binary-namesubsection}{\mathtt{namesubsection}}_0(\href{../binary/values.html#binary-name}{\mathtt{name}}) \\
\end{array}\end{split}\]</div>
</section>
<section id="function-names">
<span id="binary-funcnamesec"></span><span id="index-4"></span><h3>Function Names<a class="headerlink" href="#function-names" title="Link to this heading">¶</a></h3>
<p>The <em>function name subsection</em> has the id 1.
It consists of a <a class="reference internal" href="#binary-namemap"><span class="std std-ref">name map</span></a> assigning function names to <a class="reference internal" href="../syntax/modules.html#syntax-funcidx"><span class="std std-ref">function indices</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{function name subsection} &amp; \href{../appendix/custom.html#binary-funcnamesec}{\mathtt{funcnamesubsec}} &amp;::=&amp;
  \href{../appendix/custom.html#binary-namesubsection}{\mathtt{namesubsection}}_1(\href{../appendix/custom.html#binary-namemap}{\mathtt{namemap}}) \\
\end{array}\end{split}\]</div>
</section>
<section id="local-names">
<span id="binary-localnamesec"></span><span id="index-5"></span><h3>Local Names<a class="headerlink" href="#local-names" title="Link to this heading">¶</a></h3>
<p>The <em>local name subsection</em> has the id 2.
It consists of an <a class="reference internal" href="#binary-indirectnamemap"><span class="std std-ref">indirect name map</span></a> assigning local names to <a class="reference internal" href="../syntax/modules.html#syntax-localidx"><span class="std std-ref">local indices</span></a> grouped by <a class="reference internal" href="../syntax/modules.html#syntax-funcidx"><span class="std std-ref">function indices</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{local name subsection} &amp; \href{../appendix/custom.html#binary-localnamesec}{\mathtt{localnamesubsec}} &amp;::=&amp;
  \href{../appendix/custom.html#binary-namesubsection}{\mathtt{namesubsection}}_2(\href{../appendix/custom.html#binary-indirectnamemap}{\mathtt{indirectnamemap}}) \\
\end{array}\end{split}\]</div>
</section>
<section id="type-names">
<span id="binary-typenamesec"></span><span id="index-6"></span><h3>Type Names<a class="headerlink" href="#type-names" title="Link to this heading">¶</a></h3>
<p>The <em>type name subsection</em> has the id 4.
It consists of a <a class="reference internal" href="#binary-namemap"><span class="std std-ref">name map</span></a> assigning type names to <a class="reference internal" href="../syntax/modules.html#syntax-typeidx"><span class="std std-ref">type indices</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{type name subsection} &amp; \href{../appendix/custom.html#binary-typenamesec}{\mathtt{typenamesubsec}} &amp;::=&amp;
  \href{../appendix/custom.html#binary-namesubsection}{\mathtt{namesubsection}}_4(\href{../appendix/custom.html#binary-namemap}{\mathtt{namemap}}) \\
\end{array}\end{split}\]</div>
</section>
<section id="field-names">
<span id="binary-fieldnamesec"></span><span id="index-7"></span><h3>Field Names<a class="headerlink" href="#field-names" title="Link to this heading">¶</a></h3>
<p>The <em>field name subsection</em> has the id 10.
It consists of an <a class="reference internal" href="#binary-indirectnamemap"><span class="std std-ref">indirect name map</span></a> assigning field names to <a class="reference internal" href="../syntax/modules.html#syntax-fieldidx"><span class="std std-ref">field indices</span></a> grouped by the <a class="reference internal" href="../syntax/modules.html#syntax-typeidx"><span class="std std-ref">type indices</span></a> of their respective <a class="reference internal" href="../syntax/types.html#syntax-structtype"><span class="std std-ref">structure types</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{field name subsection} &amp; \href{../appendix/custom.html#binary-fieldnamesec}{\mathtt{fieldnamesubsec}} &amp;::=&amp;
  \href{../appendix/custom.html#binary-namesubsection}{\mathtt{namesubsection}}_10(\href{../appendix/custom.html#binary-indirectnamemap}{\mathtt{indirectnamemap}}) \\
\end{array}\end{split}\]</div>
</section>
<section id="tag-names">
<span id="binary-tagnamesec"></span><span id="index-8"></span><h3>Tag Names<a class="headerlink" href="#tag-names" title="Link to this heading">¶</a></h3>
<p>The <em>tag name subsection</em> has the id 11.
It consists of a <a class="reference internal" href="#binary-namemap"><span class="std std-ref">name map</span></a> assigning tag names to <a class="reference internal" href="../syntax/modules.html#syntax-tagidx"><span class="std std-ref">tag indices</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{tag name subsection} &amp; \href{../appendix/custom.html#binary-tagnamesec}{\mathtt{tagnamesubsec}} &amp;::=&amp;
  \href{../appendix/custom.html#binary-namesubsection}{\mathtt{namesubsection}}_1(\href{../appendix/custom.html#binary-namemap}{\mathtt{namemap}}) \\
\end{array}\end{split}\]</div>
</section>
</section>
<section id="name-annotations">
<span id="text-nameannot"></span><span id="index-9"></span><h2>Name Annotations<a class="headerlink" href="#name-annotations" title="Link to this heading">¶</a></h2>
<p><em>Name annotations</em> are the textual analogue to the <a class="reference internal" href="#binary-namesec"><span class="std std-ref">name section</span></a> and provide a textual representation for it.
Consequently, their id is <span class="math notranslate nohighlight">\(\mathtt{&#64;name}\)</span>.</p>
<p>Analogous to the name section, name annotations are allowed on <a class="reference internal" href="../text/modules.html#text-module"><span class="std std-ref">modules</span></a>, <a class="reference internal" href="../text/modules.html#text-func"><span class="std std-ref">functions</span></a>, and <a class="reference internal" href="../text/modules.html#text-local"><span class="std std-ref">locals</span></a> (including  <a class="reference internal" href="../text/types.html#text-param"><span class="std std-ref">parameters</span></a>).
They can be placed where the text format allows binding occurrences of respective <a class="reference internal" href="../text/values.html#text-id"><span class="std std-ref">identifiers</span></a>.
If both an identifier and a name annotation are given, the annotation is expected <em>after</em> the identifier.
In that case, the annotation takes precedence over the identifier as a textual representation of the binding’s name.
At most one name annotation may be given per binding.</p>
<p>All name annotations have the following format:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{name annotation} &amp; \href{../appendix/custom.html#text-nameannot}{\mathtt{nameannot}} &amp;::=&amp;
  \def\mathdef101#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef101{(&#64;name}~\href{../text/values.html#text-string}{\mathtt{string}}~\def\mathdef102#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef102{)} \\
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All name annotations can be arbitrary UTF-8 <a class="reference internal" href="../text/values.html#text-string"><span class="std std-ref">strings</span></a>.
Names need not be unique.</p>
</div>
<section id="text-modulenameannot">
<span id="index-10"></span><span id="id1"></span><h3>Module Names<a class="headerlink" href="#text-modulenameannot" title="Link to this heading">¶</a></h3>
<p>A <em>module name annotation</em> must be placed on a <a class="reference internal" href="../text/modules.html#text-module"><span class="std std-ref">module</span></a> definition,
directly after the <span class="math notranslate nohighlight">\(\def\mathdef103#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef103{module}\)</span> keyword, or if present, after the following module <a class="reference internal" href="../text/values.html#text-id"><span class="std std-ref">identifier</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{module name annotation} &amp; \href{../appendix/custom.html#text-modulenameannot}{\mathtt{modulenameannot}} &amp;::=&amp;
  \href{../appendix/custom.html#text-nameannot}{\mathtt{nameannot}} \\
\end{array}\end{split}\]</div>
</section>
<section id="text-funcnameannot">
<span id="index-11"></span><span id="id2"></span><h3>Function Names<a class="headerlink" href="#text-funcnameannot" title="Link to this heading">¶</a></h3>
<p>A <em>function name annotation</em> must be placed on a <a class="reference internal" href="../text/modules.html#text-func"><span class="std std-ref">function</span></a> definition or function <a class="reference internal" href="../text/modules.html#text-import"><span class="std std-ref">import</span></a>,
directly after the <span class="math notranslate nohighlight">\(\def\mathdef104#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef104{func}\)</span> keyword, or if present, after the following function <a class="reference internal" href="../text/values.html#text-id"><span class="std std-ref">identifier</span></a> or.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{function name annotation} &amp; \href{../appendix/custom.html#text-funcnameannot}{\mathtt{funcnameannot}} &amp;::=&amp;
  \href{../appendix/custom.html#text-nameannot}{\mathtt{nameannot}} \\
\end{array}\end{split}\]</div>
</section>
<section id="parameter-names">
<span id="text-paramnameannot"></span><span id="index-12"></span><h3>Parameter Names<a class="headerlink" href="#parameter-names" title="Link to this heading">¶</a></h3>
<p>A <em>parameter name annotation</em> must be placed on a <a class="reference internal" href="../text/types.html#text-param"><span class="std std-ref">parameter</span></a> declaration,
directly after the <span class="math notranslate nohighlight">\(\def\mathdef105#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef105{param}\)</span> keyword, or if present, after the following parameter <a class="reference internal" href="../text/values.html#text-id"><span class="std std-ref">identifier</span></a>.
It may only be placed on a declaration that declares exactly one parameter.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{parameter name annotation} &amp; \href{../appendix/custom.html#text-paramnameannot}{\mathtt{paramnameannot}} &amp;::=&amp;
  \href{../appendix/custom.html#text-nameannot}{\mathtt{nameannot}} \\
\end{array}\end{split}\]</div>
</section>
<section id="text-localnameannot">
<span id="index-13"></span><span id="id3"></span><h3>Local Names<a class="headerlink" href="#text-localnameannot" title="Link to this heading">¶</a></h3>
<p>A <em>local name annotation</em> must be placed on a <a class="reference internal" href="../text/types.html#text-param"><span class="std std-ref">local</span></a> declaration,
directly after the <span class="math notranslate nohighlight">\(\def\mathdef106#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef106{local}\)</span> keyword, or if present, after the following local <a class="reference internal" href="../text/values.html#text-id"><span class="std std-ref">identifier</span></a>.
It may only be placed on a declaration that declares exactly one local.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{local name annotation} &amp; \href{../appendix/custom.html#text-localnameannot}{\mathtt{localnameannot}} &amp;::=&amp;
  \href{../appendix/custom.html#text-nameannot}{\mathtt{nameannot}} \\
\end{array}\end{split}\]</div>
</section>
<section id="text-typenameannot">
<span id="index-14"></span><span id="id4"></span><h3>Type Names<a class="headerlink" href="#text-typenameannot" title="Link to this heading">¶</a></h3>
<p>A <em>type name annotation</em> must be placed on a <a class="reference internal" href="../text/types.html#text-type"><span class="std std-ref">type</span></a> declaration,
directly after the <span class="math notranslate nohighlight">\(\def\mathdef107#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef107{type}\)</span> keyword, or if present, after the following type <a class="reference internal" href="../text/values.html#text-id"><span class="std std-ref">identifier</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{type name annotation} &amp; \href{../appendix/custom.html#text-typenameannot}{\mathtt{typenameannot}} &amp;::=&amp;
  \href{../appendix/custom.html#text-nameannot}{\mathtt{nameannot}} \\
\end{array}\end{split}\]</div>
</section>
<section id="text-fieldnameannot">
<span id="index-15"></span><span id="id5"></span><h3>Field Names<a class="headerlink" href="#text-fieldnameannot" title="Link to this heading">¶</a></h3>
<p>A <em>field name annotation</em> must be placed on the field of a <a class="reference internal" href="../text/types.html#text-structtype"><span class="std std-ref">structure type</span></a>,
directly after the <span class="math notranslate nohighlight">\(\def\mathdef108#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef108{field}\)</span> keyword, or if present, after the following field <a class="reference internal" href="../text/values.html#text-id"><span class="std std-ref">identifier</span></a>.
It may only be placed on a declaration that declares exactly one field.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{field name annotation} &amp; \href{../appendix/custom.html#text-fieldnameannot}{\mathtt{fieldnameannot}} &amp;::=&amp;
  \href{../appendix/custom.html#text-nameannot}{\mathtt{nameannot}} \\
\end{array}\end{split}\]</div>
</section>
<section id="text-tagnameannot">
<span id="index-16"></span><span id="id6"></span><h3>Tag Names<a class="headerlink" href="#text-tagnameannot" title="Link to this heading">¶</a></h3>
<p>A <em>tag name annotation</em> must be placed on a <a class="reference internal" href="../text/modules.html#text-tag"><span class="std std-ref">tag declaration</span></a> or tag <a class="reference internal" href="../text/modules.html#text-import"><span class="std std-ref">import</span></a>,
directly after the <span class="math notranslate nohighlight">\(\def\mathdef109#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef109{tag}\)</span> keyword, or if present, after the following tag <a class="reference internal" href="../text/values.html#text-id"><span class="std std-ref">identifier</span></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{tag name annotation} &amp; \href{../appendix/custom.html#text-tagnameannot}{\mathtt{tagnameannot}} &amp;::=&amp;
  \href{../appendix/custom.html#text-nameannot}{\mathtt{nameannot}} \\
\end{array}\end{split}\]</div>
</section>
</section>
<section id="custom-annotations">
<span id="text-customannot"></span><span id="index-17"></span><h2>Custom Annotations<a class="headerlink" href="#custom-annotations" title="Link to this heading">¶</a></h2>
<p><em>Custom annotations</em> are a generic textual representation for any <a class="reference internal" href="../binary/modules.html#binary-customsec"><span class="std std-ref">custom section</span></a>.
Their id is <span class="math notranslate nohighlight">\(\mathtt{&#64;custom}\)</span>.
By generating custom annotations, tools converting between <a class="reference internal" href="../binary/index.html#binary"><span class="std std-ref">binary format</span></a> and <a class="reference internal" href="../text/index.html#text"><span class="std std-ref">text format</span></a> can maintain and round-trip the content of custom sections even when they do not recognize them.</p>
<p>Custom annotations must be placed inside a <a class="reference internal" href="../text/modules.html#text-module"><span class="std std-ref">module</span></a> definition.
They must occur anywhere after the <span class="math notranslate nohighlight">\(\def\mathdef110#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef110{module}\)</span> keyword, or if present, after the following module <a class="reference internal" href="../text/values.html#text-id"><span class="std std-ref">identifier</span></a>.
They must not be nested into other constructs.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{llclll}
\def\mathdef68#1{{}}\mathdef68{custom annotation} &amp; \href{../appendix/custom.html#text-customannot}{\mathtt{customannot}} &amp;::=&amp;
  \def\mathdef111#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef111{(&#64;custom}~~\href{../text/values.html#text-string}{\mathtt{string}}~~\href{../appendix/custom.html#text-customannot}{\mathtt{customplace}}^?~~\href{../text/modules.html#text-datastring}{\mathtt{datastring}}~~\def\mathdef112#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef112{)} \\
\def\mathdef68#1{{}}\mathdef68{custom placement} &amp; \href{../appendix/custom.html#text-customannot}{\mathtt{customplace}} &amp;::=&amp;
  \def\mathdef113#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef113{(}~\def\mathdef114#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef114{before}~~\def\mathdef115#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef115{first}~\def\mathdef116#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef116{)} \\ &amp;&amp;|&amp;
  \def\mathdef117#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef117{(}~\def\mathdef118#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef118{before}~~\href{../appendix/custom.html#text-customannot}{\mathtt{sec}}~\def\mathdef119#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef119{)} \\ &amp;&amp;|&amp;
  \def\mathdef120#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef120{(}~\def\mathdef121#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef121{after}~~\href{../appendix/custom.html#text-customannot}{\mathtt{sec}}~\def\mathdef122#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef122{)} \\ &amp;&amp;|&amp;
  \def\mathdef123#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef123{(}~\def\mathdef124#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef124{after}~~\def\mathdef125#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef125{last}~\def\mathdef126#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef126{)} \\
\def\mathdef68#1{{}}\mathdef68{section} &amp; \href{../appendix/custom.html#text-customannot}{\mathtt{sec}} &amp;::=&amp;
  \def\mathdef127#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef127{type} \\ &amp;&amp;|&amp;
  \def\mathdef128#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef128{import} \\ &amp;&amp;|&amp;
  \def\mathdef129#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef129{func} \\ &amp;&amp;|&amp;
  \def\mathdef130#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef130{table} \\ &amp;&amp;|&amp;
  \def\mathdef131#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef131{memory} \\ &amp;&amp;|&amp;
  \def\mathdef132#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef132{global} \\ &amp;&amp;|&amp;
  \def\mathdef133#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef133{export} \\ &amp;&amp;|&amp;
  \def\mathdef134#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef134{start} \\ &amp;&amp;|&amp;
  \def\mathdef135#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef135{elem} \\ &amp;&amp;|&amp;
  \def\mathdef136#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef136{code} \\ &amp;&amp;|&amp;
  \def\mathdef137#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef137{data} \\ &amp;&amp;|&amp;
  \def\mathdef138#1{\mbox{‘}\mathtt{#1}\mbox{’}}\mathdef138{datacount} \\
\end{array}\end{split}\]</div>
<p>The first <a class="reference internal" href="../text/values.html#text-string"><span class="std std-ref">string</span></a> in a custom annotation denotes the name of the custom section it represents.
The remaining strings collectively represent the section’s payload data, written as a <a class="reference internal" href="../text/modules.html#text-datastring"><span class="std std-ref">data string</span></a>, which can be split up into a possibly empty sequence of individual string literals (similar to <a class="reference internal" href="../text/modules.html#text-data"><span class="std std-ref">data segments</span></a>).</p>
<p>An arbitrary number of custom annotations (even of the same name) may occur in a module,
each defining a separate custom section when converting to <a class="reference internal" href="../binary/index.html#binary"><span class="std std-ref">binary format</span></a>.
Placement of the sections in the binary can be customized via explicit <em>placement</em> directives, that position them either directly before or directly after a known section.
That section must exist and be non-empty in the binary encoding of the annotated module.
The placements <span class="math notranslate nohighlight">\(\mathtt{(before~first)}\)</span> and <span class="math notranslate nohighlight">\(\mathtt{(after~last)}\)</span> denote virtual sections before the first and after the last known section, respectively.
When the placement directive is omitted, it defaults to <span class="math notranslate nohighlight">\(\mathtt{(after~last)}\)</span>.</p>
<p>If multiple placement directives appear for the same position, then the sections are all placed there, in order of their appearance in the text.
For this purpose, the position <span class="math notranslate nohighlight">\(\mathtt{after}\)</span> a section is considered different from the position <span class="math notranslate nohighlight">\(\mathtt{before}\)</span> the consecutive section, and the former occurs before the latter.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Future versions of WebAssembly may introduce additional sections between others or at the beginning or end of a module.
Using <span class="math notranslate nohighlight">\(\mathtt{first}\)</span> and <span class="math notranslate nohighlight">\(\mathtt{last}\)</span> guarantees that placement will still go before or after any future section, respectively.</p>
</div>
<p>If a custom section with a specific section id is given as well as annotations representing the same custom section (e.g., <span class="math notranslate nohighlight">\(\mathtt{&#64;name}\)</span> <a class="reference internal" href="#text-nameannot"><span class="std std-ref">annotations</span></a> as well as a <span class="math notranslate nohighlight">\(\mathtt{&#64;custom}\)</span> annotation for a <span class="math notranslate nohighlight">\(\mathtt{name}\)</span> <a class="reference internal" href="#binary-namesec"><span class="std std-ref">section</span></a>), then two sections are assumed to be created.
Their relative placement will depend on the placement directive given for the <span class="math notranslate nohighlight">\(\mathtt{&#64;custom}\)</span> annotation as well as the implicit placement requirements of the custom section, which are applied to the other annotation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For example, the following module,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(module
  (@custom &quot;A&quot; &quot;aaa&quot;)
  (type $t (func))
  (@custom &quot;B&quot; (after func) &quot;bbb&quot;)
  (@custom &quot;C&quot; (before func) &quot;ccc&quot;)
  (@custom &quot;D&quot; (after last) &quot;ddd&quot;)
  (table 10 funcref)
  (func (type $t))
  (@custom &quot;E&quot; (after import) &quot;eee&quot;)
  (@custom &quot;F&quot; (before type) &quot;fff&quot;)
  (@custom &quot;G&quot; (after data) &quot;ggg&quot;)
  (@custom &quot;H&quot; (after code) &quot;hhh&quot;)
  (@custom &quot;I&quot; (after func) &quot;iii&quot;)
  (@custom &quot;J&quot; (before func) &quot;jjj&quot;)
  (@custom &quot;K&quot; (before first) &quot;kkk&quot;)
)
</pre></div>
</div>
<p>will result in the following section ordering:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>custom section &quot;K&quot;
custom section &quot;F&quot;
type section
custom section &quot;E&quot;
custom section &quot;C&quot;
custom section &quot;J&quot;
function section
custom section &quot;B&quot;
custom section &quot;I&quot;
table section
code section
custom section &quot;H&quot;
custom section &quot;G&quot;
custom section &quot;A&quot;
custom section &quot;D&quot;
</pre></div>
</div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2017-2025, WebAssembly Community Group.
      
    </div>

    

    
  </body>
</html>