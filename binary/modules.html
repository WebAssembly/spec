<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Modules &#8212; WebAssembly 1.0</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="WebAssembly 1.0" href="../index.html" />
    <link rel="up" title="Binary Format" href="index.html" />
    <link rel="next" title="Text Format" href="../text/index.html" />
    <link rel="prev" title="Instructions" href="instructions.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <script type="text/javascript">MathJax.Hub.Config({TeX: {MAXBUFFER: 30*1024}})</script><body role="document">
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/placeholder.jpg" alt="Logo"/>
            </a></p><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syntax/index.html">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validation/index.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../execution/index.html">Execution</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Binary Format</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="conventions.html">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="values.html">Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="instructions.html">Instructions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#indices">Indices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sections">Sections</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-section">Custom Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type-section">Type Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#import-section">Import Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-section">Function Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-section">Table Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-section">Memory Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#global-section">Global Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#export-section">Export Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#start-section">Start Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#element-section">Element Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-section">Code Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-section">Data Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-14">Modules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../text/index.html">Text Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index.html">Appendix</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../syntax/instrindex.html">Index of Instructions</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="../genindex.html">Index</a></li>
    
    <li class="toctree-l1"><a href="../_download/WebAssembly.pdf">Download as PDF</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>
<div class="section" id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<p>The binary encoding of modules is organized into <em>sections</em>.
Most sections correspond to one component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a> record,
except that <a class="reference internal" href="../syntax/modules.html#syntax-func"><span class="std std-ref">function definitions</span></a> are split into two sections, separating their type declarations in the <a class="reference internal" href="#binary-funcsec"><span class="std std-ref">function section</span></a> from their bodies in the <a class="reference internal" href="#binary-codesec"><span class="std std-ref">code section</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This separation enables <em>parallel</em> and <em>streaming</em> compilation of the functions in a module.</p>
</div>
<span class="target" id="binary-labelidx"><span id="binary-localidx"></span><span id="binary-globalidx"></span><span id="binary-memidx"></span><span id="binary-tableidx"></span><span id="binary-funcidx"></span><span id="binary-typeidx"></span><span id="binary-index"></span></span><div class="section" id="indices">
<span id="index-0"></span><h2>Indices<a class="headerlink" href="#indices" title="Permalink to this headline">¶</a></h2>
<p>All <a class="reference internal" href="../syntax/modules.html#syntax-index"><span class="std std-ref">indices</span></a> are encoded with their respective <span class="math">\(\href{../syntax/values.html#syntax-int}{\def\mathdef634#1{{\mathit{u}#1}}\mathdef634{\mathit{32}}}\)</span> value.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{type index} &amp; \href{../binary/modules.html#binary-typeidx}{\mathtt{typeidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef652#1{{\mathtt{u}#1}}\mathdef652{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef625#1{{}}\mathdef625{function index} &amp; \href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef652#1{{\mathtt{u}#1}}\mathdef652{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef625#1{{}}\mathdef625{table index} &amp; \href{../binary/modules.html#binary-tableidx}{\mathtt{tableidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef652#1{{\mathtt{u}#1}}\mathdef652{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef625#1{{}}\mathdef625{memory index} &amp; \href{../binary/modules.html#binary-memidx}{\mathtt{memidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef652#1{{\mathtt{u}#1}}\mathdef652{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef625#1{{}}\mathdef625{global index} &amp; \href{../binary/modules.html#binary-globalidx}{\mathtt{globalidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef652#1{{\mathtt{u}#1}}\mathdef652{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef625#1{{}}\mathdef625{local index} &amp; \href{../binary/modules.html#binary-localidx}{\mathtt{localidx}} &amp;::=&amp; x{:}\href{../binary/values.html#binary-int}{\def\mathdef652#1{{\mathtt{u}#1}}\mathdef652{\mathtt{32}}} &amp;\Rightarrow&amp; x \\
\def\mathdef625#1{{}}\mathdef625{label index} &amp; \href{../binary/modules.html#binary-labelidx}{\mathtt{labelidx}} &amp;::=&amp; l{:}\href{../binary/values.html#binary-int}{\def\mathdef652#1{{\mathtt{u}#1}}\mathdef652{\mathtt{32}}} &amp;\Rightarrow&amp; l \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-section"></span></div>
<div class="section" id="sections">
<span id="index-1"></span><h2>Sections<a class="headerlink" href="#sections" title="Permalink to this headline">¶</a></h2>
<p>Each section consists of</p>
<ul class="simple">
<li>a one-byte section <em>id</em>,</li>
<li>the <span class="math">\(\href{../syntax/values.html#syntax-int}{\def\mathdef634#1{{\mathit{u}#1}}\mathdef634{\mathit{32}}}\)</span> <em>size</em> of the contents in bytes,</li>
<li>the actual <em>contents</em>, whose structure is depended on the section id.</li>
</ul>
<p>Every section is optional; an omitted section is equivalent to the section being present with empty contents.</p>
<p>The following parameterized grammar rule defines the generic structure of a section with id <span class="math">\(N\)</span> and contents described by the grammar <span class="math">\(\mathtt{B}\)</span>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll&#64;{\qquad}l}
\def\mathdef625#1{{}}\mathdef625{section} &amp; \href{../binary/modules.html#binary-module}{\mathtt{section}}_N(\mathtt{B}) &amp;::=&amp;
  N{:}\href{../binary/values.html#binary-byte}{\mathtt{byte}}~~\mathit{size}{:}\href{../binary/values.html#binary-int}{\def\mathdef652#1{{\mathtt{u}#1}}\mathdef652{\mathtt{32}}}~~\mathit{cont}{:}\mathtt{B}
    &amp;\Rightarrow&amp; \mathit{cont} &amp; (\mathit{size} = ||\mathtt{B}||) \\ &amp;&amp;|&amp;
  \epsilon &amp;\Rightarrow&amp; \epsilon
\end{array}\end{split}\]</div>
<p>For most sections, the contents <span class="math">\(\mathtt{B}\)</span> encodes a <a class="reference internal" href="values.html#binary-vec"><span class="std std-ref">vector</span></a>.
In these cases, the empty result <span class="math">\(\epsilon\)</span> is interpreted as the empty vector.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Other than for unknown <a class="reference internal" href="#binary-customsec"><span class="std std-ref">custom sections</span></a>,
the <span class="math">\(\mathit{size}\)</span> is not required for decoding, but can be used to skip sections when navigating through a binary.
The module is malformed if the size does not match the length of the binary contents <span class="math">\(\mathtt{B}\)</span>.</p>
</div>
<span class="target" id="binary-customsec"></span></div>
<div class="section" id="custom-section">
<span id="index-2"></span><h2>Custom Section<a class="headerlink" href="#custom-section" title="Permalink to this headline">¶</a></h2>
<p><em>Custom sections</em> have the id 0.
They are intended to be used for debugging information or third-party extensions, and are ignored by the WebAssembly semantics.
Their contents consist of a <a class="reference internal" href="../syntax/values.html#syntax-name"><span class="std std-ref">name</span></a> further identifying the custom section, followed by an uninterpreted sequence of bytes for custom use.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{custom section} &amp; \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}} &amp;::=&amp;
  \href{../binary/modules.html#binary-module}{\mathtt{section}}_0(\href{../binary/modules.html#binary-customsec}{\mathtt{custom}}) \\
\def\mathdef625#1{{}}\mathdef625{custom data} &amp; \href{../binary/modules.html#binary-customsec}{\mathtt{custom}} &amp;::=&amp;
  \href{../binary/values.html#binary-name}{\mathtt{name}}~~\href{../binary/values.html#binary-byte}{\mathtt{byte}}^\ast \\
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If an implementation interprets the contents of a custom section, then errors in that contents, or the placement of the section, must not invalidate the module.</p>
</div>
<span class="target" id="binary-type"><span id="binary-typesec"></span></span></div>
<div class="section" id="type-section">
<span id="index-3"></span><h2>Type Section<a class="headerlink" href="#type-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>type section</em> has the id 1.
It decodes into a vector of <a class="reference internal" href="../syntax/types.html#syntax-functype"><span class="std std-ref">function types</span></a> that represent the <span class="math">\(\mathsf{types}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{type section} &amp; \href{../binary/modules.html#binary-typesec}{\mathtt{typesec}} &amp;::=&amp;
  \mathit{ft}^\ast{:\,}\href{../binary/modules.html#binary-module}{\mathtt{section}}_1(\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/types.html#binary-functype}{\mathtt{functype}})) &amp;\Rightarrow&amp; \mathit{ft}^\ast \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-import"><span id="binary-importsec"></span></span></div>
<div class="section" id="import-section">
<span id="index-4"></span><h2>Import Section<a class="headerlink" href="#import-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>import section</em> has the id 2.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-import"><span class="std std-ref">imports</span></a> that represent the <span class="math">\(\mathsf{imports}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{import section} &amp; \href{../binary/modules.html#binary-importsec}{\mathtt{importsec}} &amp;::=&amp;
  \mathit{im}^\ast{:}\href{../binary/modules.html#binary-module}{\mathtt{section}}_2(\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-import}{\mathtt{import}})) &amp;\Rightarrow&amp; \mathit{im}^\ast \\
\def\mathdef625#1{{}}\mathdef625{import} &amp; \href{../binary/modules.html#binary-import}{\mathtt{import}} &amp;::=&amp;
  \mathit{mod}{:}\href{../binary/values.html#binary-name}{\mathtt{name}}~~\mathit{nm}{:}\href{../binary/values.html#binary-name}{\mathtt{name}}~~d{:}\href{../binary/modules.html#binary-importdesc}{\mathtt{importdesc}}
    &amp;\Rightarrow&amp; \{ \mathsf{module}~\mathit{mod}, \mathsf{name}~\mathit{nm}, \mathsf{desc}~d \} \\
\def\mathdef625#1{{}}\mathdef625{import description} &amp; \href{../binary/modules.html#binary-importdesc}{\mathtt{importdesc}} &amp;::=&amp;
  \def\mathdef679#1{\mathtt{0x#1}}\mathdef679{00}~~x{:}\href{../binary/modules.html#binary-typeidx}{\mathtt{typeidx}} &amp;\Rightarrow&amp; \mathsf{func}~x \\ &amp;&amp;|&amp;
  \def\mathdef680#1{\mathtt{0x#1}}\mathdef680{01}~~\mathit{tt}{:}\href{../binary/types.html#binary-tabletype}{\mathtt{tabletype}} &amp;\Rightarrow&amp; \mathsf{table}~\mathit{tt} \\ &amp;&amp;|&amp;
  \def\mathdef681#1{\mathtt{0x#1}}\mathdef681{02}~~\mathit{mt}{:}\href{../binary/types.html#binary-memtype}{\mathtt{memtype}} &amp;\Rightarrow&amp; \mathsf{mem}~\mathit{mt} \\ &amp;&amp;|&amp;
  \def\mathdef682#1{\mathtt{0x#1}}\mathdef682{03}~~\mathit{gt}{:}\href{../binary/types.html#binary-globaltype}{\mathtt{globaltype}} &amp;\Rightarrow&amp; \mathsf{global}~\mathit{gt} \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-func"><span id="binary-funcsec"></span></span></div>
<div class="section" id="function-section">
<span id="index-5"></span><h2>Function Section<a class="headerlink" href="#function-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>function section</em> has the id 3.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-typeidx"><span class="std std-ref">type indices</span></a> that represent the <span class="math">\(\mathsf{type}\)</span> fields of the <a class="reference internal" href="../syntax/modules.html#syntax-func"><span class="std std-ref">functions</span></a> in the <span class="math">\(\mathsf{funcs}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.
The <span class="math">\(\mathsf{locals}\)</span> and <span class="math">\(\mathsf{body}\)</span> fields of the respective functions are encoded separately in the <a class="reference internal" href="#binary-codesec"><span class="std std-ref">code section</span></a>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{function section} &amp; \href{../binary/modules.html#binary-funcsec}{\mathtt{funcsec}} &amp;::=&amp;
  x^\ast{:}\href{../binary/modules.html#binary-module}{\mathtt{section}}_3(\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-typeidx}{\mathtt{typeidx}})) &amp;\Rightarrow&amp; x^\ast \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-table"><span id="binary-tablesec"></span></span></div>
<div class="section" id="table-section">
<span id="index-6"></span><h2>Table Section<a class="headerlink" href="#table-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>table section</em> has the id 4.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-table"><span class="std std-ref">tables</span></a> that represent the <span class="math">\(\mathsf{tables}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{table section} &amp; \href{../binary/modules.html#binary-tablesec}{\mathtt{tablesec}} &amp;::=&amp;
  \mathit{tab}^\ast{:}\href{../binary/modules.html#binary-module}{\mathtt{section}}_4(\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-table}{\mathtt{table}})) &amp;\Rightarrow&amp; \mathit{tab}^\ast \\
\def\mathdef625#1{{}}\mathdef625{table} &amp; \href{../binary/modules.html#binary-table}{\mathtt{table}} &amp;::=&amp;
  \mathit{tt}{:}\href{../binary/types.html#binary-tabletype}{\mathtt{tabletype}} &amp;\Rightarrow&amp; \{ \mathsf{type}~\mathit{tt} \} \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-mem"><span id="binary-memsec"></span></span></div>
<div class="section" id="memory-section">
<span id="index-7"></span><h2>Memory Section<a class="headerlink" href="#memory-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>memory section</em> has the id 5.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-mem"><span class="std std-ref">memories</span></a> that represent the <span class="math">\(\mathsf{mems}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{memory section} &amp; \href{../binary/modules.html#binary-memsec}{\mathtt{memsec}} &amp;::=&amp;
  \mathit{mem}^\ast{:}\href{../binary/modules.html#binary-module}{\mathtt{section}}_5(\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-mem}{\mathtt{mem}})) &amp;\Rightarrow&amp; \mathit{mem}^\ast \\
\def\mathdef625#1{{}}\mathdef625{memory} &amp; \href{../binary/modules.html#binary-mem}{\mathtt{mem}} &amp;::=&amp;
  \mathit{mt}{:}\href{../binary/types.html#binary-memtype}{\mathtt{memtype}} &amp;\Rightarrow&amp; \{ \mathsf{type}~\mathit{mt} \} \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-global"><span id="binary-globalsec"></span></span></div>
<div class="section" id="global-section">
<span id="index-8"></span><h2>Global Section<a class="headerlink" href="#global-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>global section</em> has the id 6.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-global"><span class="std std-ref">globals</span></a> that represent the <span class="math">\(\mathsf{globals}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{global section} &amp; \href{../binary/modules.html#binary-globalsec}{\mathtt{globalsec}} &amp;::=&amp;
  \mathit{glob}^\ast{:}\href{../binary/modules.html#binary-module}{\mathtt{section}}_6(\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-global}{\mathtt{global}})) &amp;\Rightarrow&amp; \mathit{glob}^\ast \\
\def\mathdef625#1{{}}\mathdef625{global} &amp; \href{../binary/modules.html#binary-global}{\mathtt{global}} &amp;::=&amp;
  \mathit{gt}{:}\href{../binary/types.html#binary-globaltype}{\mathtt{globaltype}}~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}
    &amp;\Rightarrow&amp; \{ \mathsf{type}~\mathit{gt}, \mathsf{init}~e \} \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-export"><span id="binary-exportsec"></span></span></div>
<div class="section" id="export-section">
<span id="index-9"></span><h2>Export Section<a class="headerlink" href="#export-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>export section</em> has the id 7.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-export"><span class="std std-ref">exports</span></a> that represent the <span class="math">\(\mathsf{exports}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{export section} &amp; \href{../binary/modules.html#binary-exportsec}{\mathtt{exportsec}} &amp;::=&amp;
  \mathit{ex}^\ast{:}\href{../binary/modules.html#binary-module}{\mathtt{section}}_7(\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-export}{\mathtt{export}})) &amp;\Rightarrow&amp; \mathit{ex}^\ast \\
\def\mathdef625#1{{}}\mathdef625{export} &amp; \href{../binary/modules.html#binary-export}{\mathtt{export}} &amp;::=&amp;
  \mathit{nm}{:}\href{../binary/values.html#binary-name}{\mathtt{name}}~~d{:}\href{../binary/modules.html#binary-exportdesc}{\mathtt{exportdesc}}
    &amp;\Rightarrow&amp; \{ \mathsf{name}~\mathit{nm}, \mathsf{desc}~d \} \\
\def\mathdef625#1{{}}\mathdef625{export description} &amp; \href{../binary/modules.html#binary-exportdesc}{\mathtt{exportdesc}} &amp;::=&amp;
  \def\mathdef683#1{\mathtt{0x#1}}\mathdef683{00}~~x{:}\href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}} &amp;\Rightarrow&amp; \mathsf{func}~x \\ &amp;&amp;|&amp;
  \def\mathdef684#1{\mathtt{0x#1}}\mathdef684{01}~~x{:}\href{../binary/modules.html#binary-tableidx}{\mathtt{tableidx}} &amp;\Rightarrow&amp; \mathsf{table}~x \\ &amp;&amp;|&amp;
  \def\mathdef685#1{\mathtt{0x#1}}\mathdef685{02}~~x{:}\href{../binary/modules.html#binary-memidx}{\mathtt{memidx}} &amp;\Rightarrow&amp; \mathsf{mem}~x \\ &amp;&amp;|&amp;
  \def\mathdef686#1{\mathtt{0x#1}}\mathdef686{03}~~x{:}\href{../binary/modules.html#binary-globalidx}{\mathtt{globalidx}} &amp;\Rightarrow&amp; \mathsf{global}~x \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-start"><span id="binary-startsec"></span></span></div>
<div class="section" id="start-section">
<span id="index-10"></span><h2>Start Section<a class="headerlink" href="#start-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>start section</em> has the id 8.
It decodes into an optional <a class="reference internal" href="../syntax/modules.html#syntax-start"><span class="std std-ref">start function</span></a> that represents the <span class="math">\(\mathsf{start}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{start section} &amp; \href{../binary/modules.html#binary-startseg}{\mathtt{startsec}} &amp;::=&amp;
  \mathit{st}^?{:}\href{../binary/modules.html#binary-module}{\mathtt{section}}_8(\href{../binary/modules.html#binary-start}{\mathtt{start}}) &amp;\Rightarrow&amp; \mathit{st}^? \\
\def\mathdef625#1{{}}\mathdef625{start function} &amp; \href{../binary/modules.html#binary-start}{\mathtt{start}} &amp;::=&amp;
  x{:}\href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}} &amp;\Rightarrow&amp; \{ \mathsf{func}~x \} \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-elem"><span id="binary-elemsec"></span></span></div>
<div class="section" id="element-section">
<span id="index-11"></span><h2>Element Section<a class="headerlink" href="#element-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>element section</em> has the id 9.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-elem"><span class="std std-ref">element segments</span></a> that represent the <span class="math">\(\mathsf{elem}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{element section} &amp; \href{../binary/modules.html#binary-elemsec}{\mathtt{elemsec}} &amp;::=&amp;
  \mathit{seg}^\ast{:}\href{../binary/modules.html#binary-module}{\mathtt{section}}_9(\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-elem}{\mathtt{elem}})) &amp;\Rightarrow&amp; \mathit{seg} \\
\def\mathdef625#1{{}}\mathdef625{element segment} &amp; \href{../binary/modules.html#binary-elem}{\mathtt{elem}} &amp;::=&amp;
  x{:}\href{../binary/modules.html#binary-tableidx}{\mathtt{tableidx}}~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}~~y^\ast{:}\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-funcidx}{\mathtt{funcidx}})
    &amp;\Rightarrow&amp; \{ \mathsf{table}~x, \mathsf{offset}~e, \mathsf{init}~y^\ast \} \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-local"><span id="binary-codesec"></span></span></div>
<div class="section" id="code-section">
<span id="index-12"></span><h2>Code Section<a class="headerlink" href="#code-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>code section</em> has the id 10.
It decodes into a vector of <em>code</em> entries that are pairs of <a class="reference internal" href="../syntax/types.html#syntax-valtype"><span class="std std-ref">value type</span></a> vectors and <a class="reference internal" href="../syntax/instructions.html#syntax-expr"><span class="std std-ref">expressions</span></a>.
They represent the <span class="math">\(\mathsf{locals}\)</span> and <span class="math">\(\mathsf{body}\)</span> field of the <a class="reference internal" href="../syntax/modules.html#syntax-func"><span class="std std-ref">functions</span></a> in the <span class="math">\(\mathsf{funcs}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.
The <span class="math">\(\mathsf{type}\)</span> fields of the respective functions are encoded separately in the <a class="reference internal" href="#binary-funcsec"><span class="std std-ref">function section</span></a>.</p>
<p>The encoding of each code entry consists of</p>
<ul class="simple">
<li>the <span class="math">\(\href{../syntax/values.html#syntax-int}{\def\mathdef634#1{{\mathit{u}#1}}\mathdef634{\mathit{32}}}\)</span> <em>size</em> of the function code in bytes,</li>
<li>the actual <em>function code</em>, which in turn consists of<ul>
<li>the declaration of <em>locals</em>,</li>
<li>the function <em>body</em> as an <a class="reference internal" href="instructions.html#binary-expr"><span class="std std-ref">expression</span></a>.</li>
</ul>
</li>
</ul>
<p>Local declarations are compressed into a vector whose entries consist of</p>
<ul class="simple">
<li>a <span class="math">\(\href{../syntax/values.html#syntax-int}{\def\mathdef634#1{{\mathit{u}#1}}\mathdef634{\mathit{32}}}\)</span> <em>count</em>,</li>
<li>a <a class="reference internal" href="types.html#binary-valtype"><span class="std std-ref">value type</span></a>,</li>
</ul>
<p>denoting <em>count</em> locals of the same value type.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll&#64;{\qquad}l}
\def\mathdef625#1{{}}\mathdef625{code section} &amp; \href{../binary/modules.html#binary-codesec}{\mathtt{codesec}} &amp;::=&amp;
  \mathit{code}^\ast{:}\href{../binary/modules.html#binary-module}{\mathtt{section}}_{10}(\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-code}{\mathtt{code}}))
    &amp;\Rightarrow&amp; \mathit{code}^\ast \\
\def\mathdef625#1{{}}\mathdef625{code} &amp; \href{../binary/modules.html#binary-code}{\mathtt{code}} &amp;::=&amp;
  \mathit{size}{:}\href{../binary/values.html#binary-int}{\def\mathdef652#1{{\mathtt{u}#1}}\mathdef652{\mathtt{32}}}~~\mathit{code}{:}\href{../binary/modules.html#binary-func}{\mathtt{func}}
    &amp;\Rightarrow&amp; \mathit{code} &amp; (\mathit{size} = ||\href{../binary/modules.html#binary-func}{\mathtt{func}}||) \\
\def\mathdef625#1{{}}\mathdef625{function} &amp; \href{../binary/modules.html#binary-func}{\mathtt{func}} &amp;::=&amp;
  (t^\ast)^\ast{:}\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-local}{\mathtt{locals}})~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}
    &amp;\Rightarrow&amp; \concat((t^\ast)^\ast), e^\ast
      &amp; (|\concat((t^\ast)^\ast)| &lt; 2^{32}) \\
\def\mathdef625#1{{}}\mathdef625{locals} &amp; \href{../binary/modules.html#binary-local}{\mathtt{locals}} &amp;::=&amp;
  n{:}\href{../binary/values.html#binary-int}{\def\mathdef652#1{{\mathtt{u}#1}}\mathdef652{\mathtt{32}}}~~t{:}\href{../binary/types.html#binary-valtype}{\mathtt{valtype}} &amp;\Rightarrow&amp; t^n \\
\end{array}\end{split}\]</div>
<p>Here, <span class="math">\(\mathit{code}\)</span> ranges over pairs <span class="math">\((\href{../syntax/types.html#syntax-valtype}{\mathit{valtype}}^\ast, \href{../syntax/instructions.html#syntax-expr}{\mathit{expr}})\)</span>.
The meta function <span class="math">\(\mathrm{concat}((t^\ast)^\ast)\)</span> concatenates all sequences <span class="math">\(t_i^\ast\)</span> in <span class="math">\((t^\ast)^\ast\)</span>.
Any code for which the length of the resulting sequence is out of bounds of the maximum size of a <a class="reference internal" href="../syntax/values.html#syntax-vec"><span class="std std-ref">vector</span></a> is malformed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <span class="math">\(\mathit{size}\)</span> is not needed for decoding, but like with <a class="reference internal" href="#binary-section"><span class="std std-ref">sections</span></a>, can be used to skip functions when navigating through a binary.
The module is malformed if a size does not match the length of the respective function code.</p>
</div>
<span class="target" id="binary-data"><span id="binary-datasec"></span></span></div>
<div class="section" id="data-section">
<span id="index-13"></span><h2>Data Section<a class="headerlink" href="#data-section" title="Permalink to this headline">¶</a></h2>
<p>The <em>data section</em> has the id 11.
It decodes into a vector of <a class="reference internal" href="../syntax/modules.html#syntax-data"><span class="std std-ref">data segments</span></a> that represent the <span class="math">\(\mathsf{data}\)</span> component of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a>.</p>
<div class="math">
\[\begin{split}\begin{array}{llclll}
\def\mathdef625#1{{}}\mathdef625{data section} &amp; \href{../binary/modules.html#binary-datasec}{\mathtt{datasec}} &amp;::=&amp;
  \mathit{seg}^\ast{:}\href{../binary/modules.html#binary-module}{\mathtt{section}}_{11}(\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/modules.html#binary-data}{\mathtt{data}})) &amp;\Rightarrow&amp; \mathit{seg} \\
\def\mathdef625#1{{}}\mathdef625{data segment} &amp; \href{../binary/modules.html#binary-data}{\mathtt{data}} &amp;::=&amp;
  x{:}\href{../binary/modules.html#binary-memidx}{\mathtt{memidx}}~~e{:}\href{../binary/instructions.html#binary-expr}{\mathtt{expr}}~~b^\ast{:}\href{../binary/values.html#binary-vec}{\mathtt{vec}}(\href{../binary/values.html#binary-byte}{\mathtt{byte}})
    &amp;\Rightarrow&amp; \{ \mathsf{mem}~x, \mathsf{offset}~e, \mathsf{init}~b^\ast \} \\
\end{array}\end{split}\]</div>
<span class="target" id="binary-version"><span id="binary-magic"></span><span id="binary-module"></span></span></div>
<div class="section" id="index-14">
<span id="id1"></span><h2>Modules<a class="headerlink" href="#index-14" title="Permalink to this headline">¶</a></h2>
<p>The encoding of a <a class="reference internal" href="../syntax/modules.html#syntax-module"><span class="std std-ref">module</span></a> starts with a preamble containing a 4-byte magic number and a version field.
The current version of the WebAssembly binary format is 1.</p>
<p>The preamble is followed by a sequence of <a class="reference internal" href="#binary-section"><span class="std std-ref">sections</span></a>.
<a class="reference internal" href="#binary-customsec"><span class="std std-ref">Custom sections</span></a> may be inserted at any place in this sequence,
while other sections must occur at most once and in the prescribed order.
All sections can be empty.
The lengths of vectors produced by the (possibly empty) <a class="reference internal" href="#binary-funcsec"><span class="std std-ref">function</span></a> and <a class="reference internal" href="#binary-codesec"><span class="std std-ref">code</span></a> section must match up.</p>
<div class="math">
\[\begin{split}\begin{array}{llcllll}
\def\mathdef625#1{{}}\mathdef625{magic} &amp; \href{../binary/modules.html#binary-magic}{\mathtt{magic}} &amp;::=&amp;
  \def\mathdef687#1{\mathtt{0x#1}}\mathdef687{00}~\def\mathdef688#1{\mathtt{0x#1}}\mathdef688{61}~\def\mathdef689#1{\mathtt{0x#1}}\mathdef689{73}~\def\mathdef690#1{\mathtt{0x#1}}\mathdef690{6D} \\
\def\mathdef625#1{{}}\mathdef625{version} &amp; \href{../binary/modules.html#binary-version}{\mathtt{version}} &amp;::=&amp;
  \def\mathdef691#1{\mathtt{0x#1}}\mathdef691{01}~\def\mathdef692#1{\mathtt{0x#1}}\mathdef692{00}~\def\mathdef693#1{\mathtt{0x#1}}\mathdef693{00}~\def\mathdef694#1{\mathtt{0x#1}}\mathdef694{00} \\
\def\mathdef625#1{{}}\mathdef625{module} &amp; \href{../binary/modules.html#binary-module}{\mathtt{module}} &amp;::=&amp;
  \href{../binary/modules.html#binary-magic}{\mathtt{magic}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-version}{\mathtt{version}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/types.html#syntax-functype}{\mathit{functype}}^\ast{:\,}\href{../binary/modules.html#binary-typesec}{\mathtt{typesec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-import}{\mathit{import}}^\ast{:\,}\href{../binary/modules.html#binary-importsec}{\mathtt{importsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-typeidx}{\mathit{typeidx}}^n{:\,}\href{../binary/modules.html#binary-funcsec}{\mathtt{funcsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-table}{\mathit{table}}^\ast{:\,}\href{../binary/modules.html#binary-tablesec}{\mathtt{tablesec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-mem}{\mathit{mem}}^\ast{:\,}\href{../binary/modules.html#binary-memsec}{\mathtt{memsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-global}{\mathit{global}}^\ast{:\,}\href{../binary/modules.html#binary-globalsec}{\mathtt{globalsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-export}{\mathit{export}}^\ast{:\,}\href{../binary/modules.html#binary-exportsec}{\mathtt{exportsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-start}{\mathit{start}}^?{:\,}\href{../binary/modules.html#binary-startseg}{\mathtt{startsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-elem}{\mathit{elem}}^\ast{:\,}\href{../binary/modules.html#binary-elemsec}{\mathtt{elemsec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \mathit{code}^n{:\,}\href{../binary/modules.html#binary-codesec}{\mathtt{codesec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast \\ &amp;&amp;&amp;
  \href{../syntax/modules.html#syntax-data}{\mathit{data}}^\ast{:\,}\href{../binary/modules.html#binary-datasec}{\mathtt{datasec}} \\ &amp;&amp;&amp;
  \href{../binary/modules.html#binary-customsec}{\mathtt{customsec}}^\ast
  \quad\Rightarrow\quad \{~
    \begin{array}[t]{&#64;{}l&#64;{}}
    \mathsf{types}~\href{../syntax/types.html#syntax-functype}{\mathit{functype}}^\ast, \\
    \mathsf{funcs}~\href{../syntax/modules.html#syntax-func}{\mathit{func}}^n, \\
    \mathsf{tables}~\href{../syntax/modules.html#syntax-table}{\mathit{table}}^\ast, \\
    \mathsf{mems}~\href{../syntax/modules.html#syntax-mem}{\mathit{mem}}^\ast, \\
    \mathsf{globals}~\href{../syntax/modules.html#syntax-global}{\mathit{global}}^\ast, \\
    \mathsf{elem}~\href{../syntax/modules.html#syntax-elem}{\mathit{elem}}^\ast, \\
    \mathsf{data}~\href{../syntax/modules.html#syntax-data}{\mathit{data}}^\ast, \\
    \mathsf{start}~\href{../syntax/modules.html#syntax-start}{\mathit{start}}^?, \\
    \mathsf{imports}~\href{../syntax/modules.html#syntax-import}{\mathit{import}}^\ast, \\
    \mathsf{exports}~\href{../syntax/modules.html#syntax-export}{\mathit{export}}^\ast ~\} \\
   \end{array} \\
&amp;&amp;&amp; (\begin{array}[t]{&#64;{}l&#64;{}}
     \mbox{where for each $t_i^\ast, e_i$ in $\mathit{code}^n$,} \\
     \href{../syntax/modules.html#syntax-func}{\mathit{func}}^n[i] = \{ \mathsf{type}~\href{../syntax/modules.html#syntax-typeidx}{\mathit{typeidx}}^n[i], \mathsf{locals}~t_i^\ast, \mathsf{body}~e_i \} ) \\
     \end{array}
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The version of the WebAssembly binary format may increase in the future
if backward-incompatible changes are made to the format.
However, such changes are expected to occur very infrequently, if ever.
The binary format is intended to be forward-compatible,
such that future extensions can be made without incrementing its version.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2017, WebAssembly Community Group.
      
    </div>

    

    
  </body>
</html>